import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{$ as t,$t as n,Bn as r,F as i,Gt as a,Jt as o,Kt as s,Ln as c,Q as ee,Qt as l,U as te,Ut as u,Wt as ne,Yt as d,Zt as f,at as re,c as ie,cn as p,fn as m,it as ae,j as oe,kn as h,m as g,o as _,qt as v,un as y,yn as b,z as x}from"./ui-CdsL-WMe.js";import{i as S,r as C}from"./common-B7iQJWwr.js";import{d as w,t as T,v as E}from"./index-KvlnPhMc.js";import{t as D}from"./ArrowBackOutline-CaOwIdQt.js";import{t as O}from"./CalendarOutline-CiA9mbco.js";import{t as k}from"./ChevronForwardOutline-DvH9nS_3.js";import{n as A,t as j}from"./GlobeOutline-Bjt2CxbA.js";import{t as M}from"./FolderOpenOutline-CJB7n3VL.js";import{t as N}from"./LayersOutline-CZcJsfbA.js";import{t as P}from"./RefreshOutline-DFsFZU2a.js";import{t as F}from"./TrashOutline-BLUdX-Eg.js";import{t as I}from"./utils-5F9W9oaT.js";import{t as L}from"./volume-CnLE4_lm.js";import{t as R}from"./disk-BmZ8gTyl.js";var z=e(E(),1),B={class:`volume-detail-page`},V={key:0,class:`detail-container`},H={class:`info-grid`},U={class:`info-item`},W={class:`info-label`},G={class:`info-value`},K={class:`info-item`},q={class:`info-label`},se={class:`info-value`},ce={class:`info-item`},le={class:`info-label`},ue={class:`info-value`},de={class:`info-item`},fe={class:`info-label`},pe={class:`info-value`},me={class:`info-item info-item-full`},he={class:`info-label`},ge={class:`info-value`},_e={class:`info-item`},ve={class:`info-value`},ye={class:`info-item`},be={class:`info-value`},xe={key:0,class:`empty-container`},Se={key:1,class:`container-list`},Ce=[`onClick`],we={class:`container-info`},Te={class:`container-name`},Ee={class:`container-image`},De={class:`container-mount`},Oe={class:`container-action`},ke={class:`welcome-card`},Ae={class:`flex items-center gap-3`},je={class:`flex gap-2`},J=T(n({__name:`VolumeDetailView`,setup(e){let n=C(),T=S(),E=x(),J=i(),Y=h(!1),X=h(null),Z=a(()=>n.params.name),Q=a(()=>X.value&&Object.keys(X.value.volume.labels||{}).length>0),Me=e=>e?(0,z.default)(e).format(`YYYY-MM-DD HH:mm:ss`):`-`,$=async()=>{Y.value=!0;try{let e=await w.getVolume(Z.value);e.code===0?X.value=e.data:(J.error(`获取 Volume 详情失败：${e.msg}`),T.push(`/volumes`))}catch(e){J.error(`获取 Volume 详情失败：${e.message||`未知错误`}`),T.push(`/volumes`)}finally{Y.value=!1}},Ne=()=>{T.push(`/volumes`)},Pe=async()=>{await $()},Fe=()=>{if(!X.value)return;let e=X.value.volume.usageData?.refCount||0;if(e>0){E.warning({title:`无法删除`,content:`此 Volume 正在被 ${e} 个容器使用，无法删除。请先停止或删除使用该 Volume 的容器。`,positiveText:`知道了`});return}let t=E.warning({title:`确认删除`,content:`确定要删除 Volume "${Z.value}" 吗？此操作不可恢复。`,positiveText:`删除`,negativeText:`取消`,onPositiveClick:async()=>{try{t.loading=!0;let e=await w.deleteVolume(Z.value,!1);e.code===0?(J.success(`Volume 删除成功`),T.push(`/volumes`)):J.error(`删除失败：${e.msg}`)}catch(e){J.error(`删除失败：${e.message||`未知错误`}`)}finally{t.loading=!1}}})},Ie=e=>{T.push(`/containers/${e.id}`)};return p(async()=>{await $()}),(e,n)=>{let i=te,a=ae,p=_,h=ee,x=oe,S=re,C=g,w=t,T=ie;return y(),d(`div`,B,[l(C,{show:Y.value},{default:b(()=>[X.value?(y(),d(`div`,V,[l(h,{title:`基本信息`,class:`info-card`},{default:b(()=>[s(`div`,H,[s(`div`,U,[s(`div`,W,[l(i,{size:`16`},{default:b(()=>[l(c(L),{class:`name-icon`})]),_:1}),n[0]||=f(` Volume 名称 `,-1)]),s(`div`,G,r(X.value.volume.name),1)]),s(`div`,K,[s(`div`,q,[l(i,{size:`16`},{default:b(()=>[l(c(R),{class:`disk-icon`})]),_:1}),n[1]||=f(`驱动类型 `,-1)]),s(`div`,se,[l(a,{bordered:!1,type:`default`,round:``},{default:b(()=>[f(r(X.value.volume.driver),1)]),_:1})])]),s(`div`,ce,[s(`div`,le,[l(i,{size:`16`},{default:b(()=>[l(c(j),{class:`scope-icon`})]),_:1}),n[2]||=f(`作用域 `,-1)]),s(`div`,ue,[l(a,{bordered:!1,type:X.value.volume.scope===`local`?`success`:`info`,round:``},{default:b(()=>[f(r(X.value.volume.scope===`local`?`本地`:`全局`),1)]),_:1},8,[`type`])])]),s(`div`,de,[s(`div`,fe,[l(i,{size:`14`},{default:b(()=>[l(c(O),{class:`calendar-icon`})]),_:1}),n[3]||=f(`创建时间 `,-1)]),s(`div`,pe,r(Me(X.value.volume.createdAt)),1)]),s(`div`,me,[s(`div`,he,[l(i,{size:`16`},{default:b(()=>[l(c(N),{class:`layers-icon`})]),_:1}),n[4]||=f(`挂载点 `,-1)]),s(`div`,ge,[l(p,{code:``},{default:b(()=>[f(r(X.value.volume.mountpoint),1)]),_:1})])]),s(`div`,_e,[n[5]||=s(`div`,{class:`info-label`},`大小`,-1),s(`div`,ve,r(c(I)(X.value.volume.usageData?.size||0)),1)]),s(`div`,ye,[n[6]||=s(`div`,{class:`info-label`},`引用次数`,-1),s(`div`,be,[l(a,{bordered:!0,type:`warning`,round:``},{default:b(()=>[f(r(X.value.volume.usageData?.refCount||0)+` 个容器 `,1)]),_:1})])])])]),_:1}),Q.value?(y(),v(h,{key:0,title:`标签`,class:`info-card`},{default:b(()=>[l(x,null,{default:b(()=>[(y(!0),d(u,null,m(X.value.volume.labels,(e,t)=>(y(),v(a,{key:t,bordered:!1,type:`info`},{default:b(()=>[f(r(t)+`: `+r(e),1)]),_:2},1024))),128))]),_:1})]),_:1})):o(``,!0),l(h,{title:`已连接的容器`,class:`info-card`},{default:b(()=>[!X.value.containers||X.value.containers.length===0?(y(),d(`div`,xe,[l(S,{description:`没有容器使用此 Volume`})])):(y(),d(`div`,Se,[(y(!0),d(u,null,m(X.value.containers,e=>(y(),d(`div`,{key:e.id,class:`container-item`,onClick:t=>Ie(e)},[s(`div`,we,[s(`div`,Te,[l(i,{size:`20`,class:`mr-2`},{default:b(()=>[l(c(A))]),_:1}),f(` `+r(e.name)+` `,1),l(a,{bordered:!1,size:`small`,type:e.running?`success`:`default`,class:`ml-2`},{default:b(()=>[f(r(e.running?`运行中`:`已停止`),1)]),_:2},1032,[`type`])]),s(`div`,Ee,[l(p,{depth:`3`},{default:b(()=>[f(r(e.image),1)]),_:2},1024)]),s(`div`,De,[l(i,{size:`16`,class:`mr-1`},{default:b(()=>[l(c(M))]),_:1}),l(p,{depth:`3`,code:``,class:`text-xs`},{default:b(()=>[f(r(e.destination),1)]),_:2},1024),l(a,{bordered:!1,size:`small`,type:`info`,class:`ml-2`},{default:b(()=>[f(r(e.mode),1)]),_:2},1024)])]),s(`div`,Oe,[l(i,{size:`20`},{default:b(()=>[l(c(k))]),_:1})])],8,Ce))),128))]))]),_:1})])):o(``,!0)]),_:1},8,[`show`]),(y(),v(ne,{to:`#header`,defer:``},[s(`div`,ke,[s(`div`,Ae,[l(w,{onClick:Ne,text:``,circle:``},{icon:b(()=>[l(i,{size:`20`},{default:b(()=>[l(c(D))]),_:1})]),_:1}),s(`div`,null,[l(T,{class:`m-0 text-lg`},{default:b(()=>[...n[7]||=[f(`Volume 详情`,-1)]]),_:1}),l(p,{depth:`3`,class:`text-xs max-md:hidden`},{default:b(()=>[f(r(Z.value),1)]),_:1})])]),s(`div`,je,[l(w,{onClick:Pe,loading:Y.value,circle:``,size:`tiny`},{icon:b(()=>[l(i,null,{default:b(()=>[l(c(P))]),_:1})]),_:1},8,[`loading`]),l(w,{onClick:Fe,circle:``,size:`tiny`,tertiary:``,type:`error`},{icon:b(()=>[l(i,null,{default:b(()=>[l(c(F))]),_:1})]),_:1})])])]))])}}}),[[`__scopeId`,`data-v-aa6b06ee`]]);export{J as default};
//# sourceMappingURL=VolumeDetailView-BlJnGoCC.js.map