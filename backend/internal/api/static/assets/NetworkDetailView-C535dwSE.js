import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{$ as t,$t as n,Bn as r,F as i,Gt as a,Jt as o,Kt as s,Ln as c,N as l,Q as ee,Qt as u,U as d,Ut as f,Wt as te,Yt as p,Zt as m,at as h,c as g,cn as _,fn as v,it as ne,j as re,kn as y,m as b,o as x,qt as S,u as C,un as w,yn as T,z as E}from"./ui-CdsL-WMe.js";import{i as D,r as O}from"./common-B7iQJWwr.js";import{l as k,t as A,v as j}from"./index-KvlnPhMc.js";import{t as M}from"./ArrowBackOutline-CaOwIdQt.js";import{t as N}from"./CalendarOutline-CiA9mbco.js";import{t as P}from"./ChevronForwardOutline-DvH9nS_3.js";import{n as F,t as I}from"./GlobeOutline-Bjt2CxbA.js";import{t as L}from"./GitNetworkOutline-CYC_thJd.js";import{t as R}from"./RefreshOutline-DFsFZU2a.js";import{t as z}from"./TrashOutline-BLUdX-Eg.js";import{t as B}from"./network-CzXgAWPP.js";var V={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 32`};function H(e,t){return w(),p(`svg`,V,[...t[0]||=[s(`path`,{fill:`currentColor`,d:`M28 12v-2h-6V4h-2v6h-8V4h-2v6H4v2h6v8H4v2h6v6h2v-6h8v6h2v-6h6v-2h-6v-8zm-8 8h-8v-8h8z`},null,-1)]])}var U={render:H},W={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`};function G(e,t){return w(),p(`svg`,W,[...t[0]||=[s(`path`,{fill:`currentColor`,d:`M16 4.2c1.5 0 3 .6 4.2 1.7l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2m-3.3 2.5.8.8c.7-.7 1.6-1 2.5-1s1.8.3 2.5 1l.8-.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4M19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2m0 6H5v-4h14zM6 16h2v2H6zm3.5 0h2v2h-2zm3.5 0h2v2h-2z`},null,-1)]])}var K={render:G},q=e(j(),1),J={class:`network-detail-page`},Y={key:0,class:`detail-container`},X={class:`info-grid`},ie={class:`info-item`},ae={class:`info-label`},oe={class:`info-value`},se={class:`info-item`},ce={class:`info-label`},le={class:`info-value`},ue={class:`info-item`},de={class:`info-label`},fe={class:`info-value`},pe={class:`info-item`},me={class:`info-label`},he={class:`info-value`},ge={class:`info-item`},_e={class:`info-label`},ve={class:`info-value`},ye={class:`info-item`},be={class:`info-value`},xe={class:`info-grid`},Se={class:`info-item`},Ce={class:`info-value`},we={class:`info-item`},Te={class:`info-value`},Ee={class:`info-item`},De={class:`info-value`},Oe={class:`info-item`},ke={class:`info-value`},Ae={class:`info-grid`},je={class:`info-item`},Me={class:`info-value`},Ne={class:`info-grid`},Pe={key:0,class:`info-item info-item-full`},Fe={class:`info-label`},Ie={class:`info-value`},Le={key:1,class:`info-item`},Re={class:`info-label`},ze={class:`info-value`},Be={key:2,class:`info-item`},Ve={class:`info-value`},He={key:0,class:`empty-container`},Ue={key:1,class:`container-list`},We=[`onClick`],Ge={class:`container-info`},Ke={class:`container-name`},qe={key:0,class:`container-image`},Je={class:`container-network-info`},Ye={key:0,class:`network-info-item`},Xe={key:1,class:`network-info-item`},Z={key:2,class:`network-info-item`},Ze={class:`container-action`},Qe={class:`welcome-card`},$e={class:`flex items-center gap-3`},et={class:`flex gap-2`},Q=A(n({__name:`NetworkDetailView`,setup(e){let n=O(),A=D(),j=E(),V=i(),H=y(!1),W=y(null),G=a(()=>n.params.id),Q=a(()=>W.value?[`bridge`,`host`,`none`].includes(W.value.network.name):!1),tt=a(()=>W.value&&Object.keys(W.value.network.labels||{}).length>0),nt=a(()=>W.value&&Object.keys(W.value.network.options||{}).length>0),rt=a(()=>W.value&&W.value.network.ipam),it=e=>e?(0,q.default)(e).format(`YYYY-MM-DD HH:mm:ss`):`-`,at=e=>({bridge:`success`,overlay:`info`,host:`warning`,macvlan:`default`,none:`default`})[e]||`default`,ot=e=>({local:`本地`,swarm:`Swarm`,global:`全局`})[e]||e,$=async()=>{H.value=!0;try{let e=await k.getNetwork(G.value);e.code===0?W.value=e.data:(V.error(`获取网络详情失败：${e.msg}`),A.push(`/networks`))}catch(e){V.error(`获取网络详情失败：${e.message||`未知错误`}`),A.push(`/networks`)}finally{H.value=!1}},st=()=>{A.push(`/networks`)},ct=async()=>{await $()},lt=()=>{if(W.value){if(W.value.network.containerCount>0){j.warning({title:`无法删除`,content:`此网络正在被 ${W.value.network.containerCount} 个容器使用，无法删除。请先断开所有容器的连接。`,positiveText:`知道了`});return}j.warning({title:`确认删除`,content:`确定要删除网络 "${W.value.network.name}" 吗？此操作不可恢复。`,positiveText:`删除`,negativeText:`取消`,onPositiveClick:async()=>{try{let e=await k.deleteNetwork(G.value);e.code===0?(V.success(`网络删除成功`),A.push(`/networks`)):V.error(`删除失败：${e.msg}`)}catch(e){V.error(`删除失败：${e.message||`未知错误`}`)}}})}},ut=e=>{A.push(`/containers/${e.id}`)};return _(async()=>{await $()}),(e,n)=>{let i=d,a=x,_=ne,y=l,E=ee,D=C,O=re,k=h,A=b,j=t,V=g;return w(),p(`div`,J,[u(A,{show:H.value},{default:T(()=>[W.value?(w(),p(`div`,Y,[u(E,{title:`基本信息`,class:`info-card`},{default:T(()=>[s(`div`,X,[s(`div`,ie,[s(`div`,ae,[u(i,{size:`16`},{default:T(()=>[u(c(B),{class:`network-icon`})]),_:1}),n[0]||=m(` 网络名称 `,-1)]),s(`div`,oe,r(W.value.network.name),1)]),s(`div`,se,[s(`div`,ce,[u(i,{size:`16`},{default:T(()=>[u(c(U),{class:`id-icon`})]),_:1}),n[1]||=m(`网络ID `,-1)]),s(`div`,le,[u(a,{code:``},{default:T(()=>[m(r(W.value.network.id.substring(0,12)),1)]),_:1})])]),s(`div`,ue,[s(`div`,de,[u(i,{size:`16`},{default:T(()=>[u(c(L),{class:`driver-icon`})]),_:1}),n[2]||=m(`驱动类型 `,-1)]),s(`div`,fe,[u(_,{bordered:!1,type:at(W.value.network.driver),round:``},{default:T(()=>[m(r(W.value.network.driver),1)]),_:1},8,[`type`])])]),s(`div`,pe,[s(`div`,me,[u(i,{size:`16`},{default:T(()=>[u(c(I),{class:`scope-icon`})]),_:1}),n[3]||=m(`作用域 `,-1)]),s(`div`,he,[u(_,{bordered:!1,type:`default`,round:``},{default:T(()=>[m(r(ot(W.value.network.scope)),1)]),_:1})])]),s(`div`,ge,[s(`div`,_e,[u(i,{size:`14`},{default:T(()=>[u(c(N),{class:`calendar-icon`})]),_:1}),n[4]||=m(`创建时间 `,-1)]),s(`div`,ve,r(it(W.value.network.created)),1)]),s(`div`,ye,[n[5]||=s(`div`,{class:`info-label`},`连接容器数`,-1),s(`div`,be,[u(_,{bordered:!0,type:`warning`,round:``},{default:T(()=>[m(r(W.value.network.containerCount||0)+` 个容器 `,1)]),_:1})])])]),u(y),s(`div`,xe,[s(`div`,Se,[n[6]||=s(`div`,{class:`info-label`},`内部网络`,-1),s(`div`,Ce,[u(_,{type:W.value.network.internal?`info`:`default`,size:`small`},{default:T(()=>[m(r(W.value.network.internal?`是`:`否`),1)]),_:1},8,[`type`])])]),s(`div`,we,[n[7]||=s(`div`,{class:`info-label`},`可连接`,-1),s(`div`,Te,[u(_,{type:W.value.network.attachable?`success`:`default`,size:`small`},{default:T(()=>[m(r(W.value.network.attachable?`是`:`否`),1)]),_:1},8,[`type`])])]),s(`div`,Ee,[n[8]||=s(`div`,{class:`info-label`},`Ingress`,-1),s(`div`,De,[u(_,{type:W.value.network.ingress?`info`:`default`,size:`small`},{default:T(()=>[m(r(W.value.network.ingress?`是`:`否`),1)]),_:1},8,[`type`])])]),s(`div`,Oe,[n[9]||=s(`div`,{class:`info-label`},`IPv6`,-1),s(`div`,ke,[u(_,{type:W.value.network.enableIPv6?`success`:`default`,size:`small`},{default:T(()=>[m(r(W.value.network.enableIPv6?`已启用`:`未启用`),1)]),_:1},8,[`type`])])])])]),_:1}),rt.value?(w(),S(E,{key:0,title:`IPAM 配置`,class:`info-card`},{default:T(()=>[s(`div`,Ae,[s(`div`,je,[n[10]||=s(`div`,{class:`info-label`},`IPAM 驱动`,-1),s(`div`,Me,r(W.value.network.ipam?.driver||`default`),1)])]),W.value.network.ipam?.config?(w(),S(y,{key:0})):o(``,!0),(w(!0),p(f,null,v(W.value.network.ipam?.config,(e,t)=>(w(),p(`div`,{key:t,class:`ipam-config-section`},[u(D,{class:`my-2`},{default:T(()=>[m(`配置 `+r(t+1),1)]),_:2},1024),s(`div`,Ne,[e.subnet?(w(),p(`div`,Pe,[s(`div`,Fe,[u(i,{size:`16`},{default:T(()=>[u(c(I))]),_:1}),n[11]||=m(`子网 `,-1)]),s(`div`,Ie,[u(a,{code:``},{default:T(()=>[m(r(e.subnet),1)]),_:2},1024)])])):o(``,!0),e.gateway?(w(),p(`div`,Le,[s(`div`,Re,[u(i,{size:`16`},{default:T(()=>[u(c(K))]),_:1}),n[12]||=m(`网关 `,-1)]),s(`div`,ze,[u(a,{code:``},{default:T(()=>[m(r(e.gateway),1)]),_:2},1024)])])):o(``,!0),e.ipRange?(w(),p(`div`,Be,[n[13]||=s(`div`,{class:`info-label`},`IP 范围`,-1),s(`div`,Ve,[u(a,{code:``},{default:T(()=>[m(r(e.ipRange),1)]),_:2},1024)])])):o(``,!0)])]))),128))]),_:1})):o(``,!0),nt.value?(w(),S(E,{key:1,title:`驱动选项`,class:`info-card`},{default:T(()=>[u(O,{vertical:``},{default:T(()=>[(w(!0),p(f,null,v(W.value.network.options,(e,t)=>(w(),p(`div`,{key:t,class:`option-item`},[u(a,{strong:``},{default:T(()=>[m(r(t)+`:`,1)]),_:2},1024),u(a,{code:``},{default:T(()=>[m(r(e),1)]),_:2},1024)]))),128))]),_:1})]),_:1})):o(``,!0),tt.value?(w(),S(E,{key:2,title:`标签`,class:`info-card`},{default:T(()=>[u(O,null,{default:T(()=>[(w(!0),p(f,null,v(W.value.network.labels,(e,t)=>(w(),S(_,{key:t,bordered:!1,type:`info`},{default:T(()=>[m(r(t)+`: `+r(e),1)]),_:2},1024))),128))]),_:1})]),_:1})):o(``,!0),u(E,{title:`已连接的容器`,class:`info-card`},{default:T(()=>[!W.value.containers||W.value.containers.length===0?(w(),p(`div`,He,[u(k,{description:`没有容器连接到此网络`})])):(w(),p(`div`,Ue,[(w(!0),p(f,null,v(W.value.containers,e=>(w(),p(`div`,{key:e.id,class:`container-item`,onClick:t=>ut(e)},[s(`div`,Ge,[s(`div`,Ke,[u(i,{size:`20`,class:`mr-2`},{default:T(()=>[u(c(F))]),_:1}),m(` `+r(e.name)+` `,1),u(_,{bordered:!1,size:`small`,type:e.running?`success`:`default`,class:`ml-2`},{default:T(()=>[m(r(e.running?`运行中`:`已停止`),1)]),_:2},1032,[`type`])]),e.image?(w(),p(`div`,qe,[u(a,{depth:`3`},{default:T(()=>[m(r(e.image),1)]),_:2},1024)])):o(``,!0),s(`div`,Je,[e.ipv4Address?(w(),p(`div`,Ye,[u(i,{size:`16`,class:`mr-1`},{default:T(()=>[u(c(I))]),_:1}),u(a,{depth:`3`,code:``,class:`text-xs`},{default:T(()=>[m(` IPv4: `+r(e.ipv4Address),1)]),_:2},1024)])):o(``,!0),e.ipv6Address?(w(),p(`div`,Xe,[u(i,{size:`16`,class:`mr-1`},{default:T(()=>[u(c(I))]),_:1}),u(a,{depth:`3`,code:``,class:`text-xs`},{default:T(()=>[m(` IPv6: `+r(e.ipv6Address),1)]),_:2},1024)])):o(``,!0),e.macAddress?(w(),p(`div`,Z,[u(a,{depth:`3`,code:``,class:`text-xs`},{default:T(()=>[m(` MAC: `+r(e.macAddress),1)]),_:2},1024)])):o(``,!0)])]),s(`div`,Ze,[u(i,{size:`20`},{default:T(()=>[u(c(P))]),_:1})])],8,We))),128))]))]),_:1})])):o(``,!0)]),_:1},8,[`show`]),(w(),S(te,{to:`#header`,defer:``},[s(`div`,Qe,[s(`div`,$e,[u(j,{onClick:st,text:``,circle:``},{icon:T(()=>[u(i,{size:`20`},{default:T(()=>[u(c(M))]),_:1})]),_:1}),s(`div`,null,[u(V,{class:`m-0 text-lg`},{default:T(()=>[...n[14]||=[m(`网络详情`,-1)]]),_:1}),u(a,{depth:`3`,class:`text-xs max-md:hidden`},{default:T(()=>[m(r(G.value),1)]),_:1})])]),s(`div`,et,[u(j,{onClick:ct,loading:H.value,circle:``,size:`tiny`},{icon:T(()=>[u(i,null,{default:T(()=>[u(c(R))]),_:1})]),_:1},8,[`loading`]),Q.value?o(``,!0):(w(),S(j,{key:0,onClick:lt,circle:``,size:`tiny`,tertiary:``,type:`error`},{icon:T(()=>[u(i,null,{default:T(()=>[u(c(z))]),_:1})]),_:1}))])])]))])}}}),[[`__scopeId`,`data-v-c92a4782`]]);export{Q as default};
//# sourceMappingURL=NetworkDetailView-C535dwSE.js.map