import{$ as e,$t as t,Bn as n,F as r,Gt as i,Jt as a,Kt as o,Ln as s,M as c,Qt as l,Rn as u,U as d,Ut as f,Xt as p,Yt as m,Zt as h,_ as g,_n as _,b as v,cn as y,it as b,j as x,k as S,l as C,ln as w,mn as T,o as E,qt as D,tt as O,un as k,v as A,vn as j,x as M,y as N,yn as P}from"./ui-CdsL-WMe.js";import{i as F,o as I,r as L}from"./common-B7iQJWwr.js";import{g as R,n as z,t as B}from"./index-KvlnPhMc.js";import{t as V}from"./useResponsive-C7zPy5Go.js";import{t as H}from"./app-CSclzxOM.js";import{t as U}from"./ArchiveOutline-CZXbpvQu.js";import{t as W}from"./HomeOutline-DcVz7_Cy.js";import{t as G}from"./LayersOutline-CZcJsfbA.js";import{t as K}from"./RefreshOutline-DFsFZU2a.js";import{t as ee}from"./SettingsOutline-CTIPav-s.js";import{t as te}from"./TerminalOutline-BnC38DdK.js";import{t as q}from"./logo-WXCFh1U_.js";import{t as J}from"./container-BbVEwPu1.js";import{d as Y,l as X}from"./utils-5F9W9oaT.js";import{t as Z}from"./image-Bt3Khyum.js";import{t as ne}from"./compose-BeaxuMAs.js";import{t as re}from"./log-BiY5VKye.js";import{t as ie}from"./volume-CnLE4_lm.js";import{t as ae}from"./network-CzXgAWPP.js";var oe={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},se=t({name:`LogOutOutline`,render:function(e,t){return k(),m(`svg`,oe,t[0]||=[o(`path`,{d:`M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40`,fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`},null,-1),o(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M368 336l80-80l-80-80`},null,-1),o(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M176 256h256`},null,-1)])}}),ce={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},le=t({name:`LogoGithub`,render:function(e,t){return k(),m(`svg`,ce,t[0]||=[o(`path`,{d:`M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 0 0 3.8.4c8.3 0 11.5-6.1 11.5-11.4c0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 0 1-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5c-10.2-26.5-24.9-33.6-24.9-33.6c-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8c11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0 0 25.6-6c2-14.8 7.8-24.9 14.2-30.7c-49.7-5.8-102-25.5-102-113.5c0-25.1 8.7-45.6 23-61.6c-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 0 1 5-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 0 1 112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 0 1 5 .5c12.2 31.6 4.5 55 2.2 60.8c14.3 16.1 23 36.6 23 61.6c0 88.2-52.4 107.6-102.3 113.3c8 7.1 15.2 21.1 15.2 42.5c0 30.7-.3 55.5-.3 63c0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 0 0 4-.4C415.9 449.2 480 363.1 480 261.7C480 134.9 379.7 32 256 32z`,fill:`currentColor`},null,-1)])}}),ue={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},de=t({name:`MenuOutline`,render:function(e,t){return k(),m(`svg`,ue,t[0]||=[o(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-miterlimit":`10`,"stroke-width":`32`,d:`M80 160h352`},null,-1),o(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-miterlimit":`10`,"stroke-width":`32`,d:`M80 256h352`},null,-1),o(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-miterlimit":`10`,"stroke-width":`32`,d:`M80 352h352`},null,-1)])}}),fe={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},pe=t({name:`Moon`,render:function(e,t){return k(),m(`svg`,fe,t[0]||=[o(`path`,{d:`M264 480A232 232 0 0 1 32 248c0-94 54-178.28 137.61-214.67a16 16 0 0 1 21.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200c31.34 0 59.57-5.07 81.61-14.67a16 16 0 0 1 21.06 21.06C442.28 426 358 480 264 480z`,fill:`currentColor`},null,-1)])}}),me={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},he=t({name:`Sunny`,render:function(e,t){return k(),m(`svg`,me,t[0]||=[p(`<path d="M256 118a22 22 0 0 1-22-22V48a22 22 0 0 1 44 0v48a22 22 0 0 1-22 22z" fill="currentColor"></path><path d="M256 486a22 22 0 0 1-22-22v-48a22 22 0 0 1 44 0v48a22 22 0 0 1-22 22z" fill="currentColor"></path><path d="M369.14 164.86a22 22 0 0 1-15.56-37.55l33.94-33.94a22 22 0 0 1 31.11 31.11l-33.94 33.94a21.93 21.93 0 0 1-15.55 6.44z" fill="currentColor"></path><path d="M108.92 425.08a22 22 0 0 1-15.55-37.56l33.94-33.94a22 22 0 1 1 31.11 31.11l-33.94 33.94a21.94 21.94 0 0 1-15.56 6.45z" fill="currentColor"></path><path d="M464 278h-48a22 22 0 0 1 0-44h48a22 22 0 0 1 0 44z" fill="currentColor"></path><path d="M96 278H48a22 22 0 0 1 0-44h48a22 22 0 0 1 0 44z" fill="currentColor"></path><path d="M403.08 425.08a21.94 21.94 0 0 1-15.56-6.45l-33.94-33.94a22 22 0 0 1 31.11-31.11l33.94 33.94a22 22 0 0 1-15.55 37.56z" fill="currentColor"></path><path d="M142.86 164.86a21.89 21.89 0 0 1-15.55-6.44l-33.94-33.94a22 22 0 0 1 31.11-31.11l33.94 33.94a22 22 0 0 1-15.56 37.55z" fill="currentColor"></path><path d="M256 358a102 102 0 1 1 102-102a102.12 102.12 0 0 1-102 102z" fill="currentColor"></path>`,9)])}}),ge={class:`sider-header`},Q={key:0,class:`user-info`},_e={class:`sider-footer`},ve={class:`flex items-center justify-center gap-2`},ye={class:`footer-actions`},$=B(t({__name:`SiderContent`,props:{onMenuSelect:{type:Function,default:void 0}},setup(t){let c=t,u=L(),f=F(),p=r(),_=H(),v=R(),y=J(),w=Z(),T=z(),A=i(()=>T.systemInfo?.version),j=i(()=>{let e=u.path;return e===`/`||e===`/home`?`home`:e.startsWith(`/containers`)?`containers`:e.startsWith(`/images`)?`images`:e.startsWith(`/compose`)?`compose`:e.startsWith(`/volumes`)?`volumes`:e.startsWith(`/networks`)?`networks`:e===`/logs`?`logs`:e===`/terminal`?`terminal`:e===`/settings`?`settings`:`home`}),M=i(()=>_.systemHealth),N=i(()=>{switch(M.value){case`healthy`:return`正常`;case`unhealthy`:return`异常`;default:return`未知`}}),I=i(()=>[{label:`首页`,key:`home`,icon:X(W,{size:20})},{label:`Compose 项目`,key:`compose`,icon:X(ne,{size:20})},{label:`容器管理`,key:`containers`,icon:X(G,{size:20})},{label:`镜像管理`,key:`images`,icon:X(U,{size:20})},{label:`网络管理`,key:`networks`,icon:X(ae,{size:20})},{label:`Volume 管理`,key:`volumes`,icon:X(ie,{size:20})},{label:`日志`,key:`logs`,icon:X(re,{size:20})},T.systemInfo?.isOpenDockerShell&&{label:`终端`,key:`terminal`,icon:X(te,{size:20})},{label:`系统设置`,key:`settings`,icon:X(ee,{size:20})}].filter(Boolean)),B=e=>{switch(e){case`home`:f.push(`/`);break;case`containers`:f.push(`/containers`);break;case`images`:f.push(`/images`);break;case`compose`:f.push(`/compose`);break;case`volumes`:f.push(`/volumes`);break;case`networks`:f.push(`/networks`);break;case`logs`:f.push(`/logs`);break;case`terminal`:f.push(`/terminal`);break;case`settings`:f.push(`/settings`);break}c.onMenuSelect&&c.onMenuSelect()},V=async()=>{_.setGlobalLoading(!0);try{j.value===`containers`?await y.fetchContainers(!1,!0):j.value===`images`?await w.fetchImages():await Promise.all([y.fetchContainers(!1,!0),w.fetchImages()]),_.updateRefreshTime()}catch(e){console.error(`刷新数据失败:`,e)}finally{_.setGlobalLoading(!1)}},q=async()=>{try{await v.logout(),p.success(`已登出`)}catch(e){console.error(`登出失败:`,e),p.error(`登出失败`)}},Y=()=>{window.open(`https://github.com/jianxcao/watch-docker`,`_blank`)};return(t,r)=>{let i=C,c=x,u=g,f=O,p=E,y=d,w=e,T=b,F=S;return k(),D(F,{class:`sider-content`},{default:P(()=>[o(`div`,ge,[l(c,{align:`center`},{default:P(()=>[r[1]||=o(`img`,{src:`/logo.svg`,alt:`Logo`,class:`logo`},null,-1),l(i,{style:{margin:`0`}},{default:P(()=>[...r[0]||=[h(`Watch Docker`,-1)]]),_:1})]),_:1})]),l(u,{value:j.value,options:I.value,"onUpdate:value":B,class:`sider-menu`},null,8,[`value`,`options`]),s(v).authEnabled&&s(v).isLoggedIn?(k(),m(`div`,Q,[l(c,{align:`center`,justify:`space-between`},{default:P(()=>[l(c,{align:`center`,size:`small`},{default:P(()=>[l(f,{size:`small`,style:{backgroundColor:`#18a058`}},{default:P(()=>[h(n(s(v).username.charAt(0).toUpperCase()),1)]),_:1}),l(p,null,{default:P(()=>[h(n(s(v).username),1)]),_:1})]),_:1}),l(w,{text:``,size:`large`,onClick:q,title:`登出`},{icon:P(()=>[l(y,null,{default:P(()=>[l(s(se))]),_:1})]),_:1})]),_:1})])):a(``,!0),o(`div`,_e,[o(`div`,ve,[l(T,{type:M.value===`healthy`?`success`:`error`,size:`small`},{default:P(()=>[h(n(N.value),1)]),_:1},8,[`type`]),l(p,{depth:`3`,style:{"font-size":`12px`}},{default:P(()=>[h(n(A.value),1)]),_:1})]),o(`div`,ye,[l(y,{onClick:Y,class:`cursor-pointer`,title:`访问 GitHub 仓库`,size:`20`},{default:P(()=>[l(s(le))]),_:1}),l(y,{onClick:V,loading:s(_).globalLoading,class:`cursor-pointer`,title:`刷新数据`,size:`20`},{default:P(()=>[s(_).globalLoading?(k(),D(s(K),{key:0,class:`rotating`})):(k(),D(s(K),{key:1}))]),_:1},8,[`loading`])])])]),_:1})}}}),[[`__scopeId`,`data-v-c2ffe017`]]),be=t({__name:`MobileDrawer`,setup(e){let t=H(),n=i({get:()=>t.drawerVisible,set:e=>{e||t.closeDrawer()}}),r=()=>{t.closeDrawer()};return(e,t)=>{let i=c;return k(),D(i,{show:n.value,"onUpdate:show":t[0]||=e=>n.value=e,width:280,placement:`left`,"trap-focus":!1,"block-scroll":!1,class:`mobile-drawer-menu`},{default:P(()=>[l($,{"on-menu-select":r})]),_:1},8,[`show`])}}}),xe={class:`header-content`},Se=B(t({__name:`LayoutView`,setup(t){let n=L(),r=i(()=>n.meta.layoutClass),c=H(),{isLargeScreen:p,isSmallScreen:h}=V(),g=z(),b=i(()=>g.setting.theme===`dark`);function x(){g.setTheme(b.value?`light`:`dark`)}let C=J(),E=Z();j(()=>{document.body.setAttribute(`data-theme`,g.setting.theme)}),y(async()=>{await c.checkHealth(),Promise.all([g.fetchSystemInfo(),C.fetchContainers(!0,!1),E.fetchImages(),C.statsWebSocket.connect()]),E.startImagesPolling()}),w(()=>{E.stopImagesPolling(),C.statsWebSocket.disconnect()});async function O(){c.systemHealth===`unhealthy`&&await c.checkHealth(),C.fetchContainers(!0,!1),E.fetchImages(),C.statsWebSocket.isConnected||C.statsWebSocket.connect()}return _(I(),e=>{console.debug(`visibility`,e),e===`visible`&&Y(1e3).then(()=>{console.debug(`页面可见重新刷新`),O()})}),(t,n)=>{let i=A,g=d,_=e,y=N,C=T(`router-view`),w=v,E=S,O=M;return k(),m(f,null,[l(O,{"has-sider":``,class:`layout-container`},{default:P(()=>[s(p)?(k(),D(i,{key:0,width:240,"collapsed-width":0,"collapse-mode":`width`,bordered:``,"show-trigger":`bar`,class:`layout-sider`},{default:P(()=>[l($)]),_:1})):a(``,!0),l(O,{class:u([`main-layout`,r.value])},{default:P(()=>[l(y,{bordered:``,class:`header-wrap`},{default:P(()=>[o(`div`,xe,[s(h)?(k(),D(_,{key:0,text:``,onClick:s(c).toggleDrawer},{icon:P(()=>[l(g,{size:`20`},{default:P(()=>[l(s(de))]),_:1})]),_:1},8,[`onClick`])):a(``,!0),n[0]||=o(`div`,{id:`header`},null,-1),l(_,{quaternary:``,circle:``,size:`small`,onClick:x,class:`flex items-center justify-center`},{icon:P(()=>[l(g,{component:b.value?s(pe):s(he)},null,8,[`component`])]),_:1})])]),_:1}),l(w,{class:`layout-content`,position:`static`},{default:P(()=>[l(C,{class:`h-full`})]),_:1}),l(E,{id:`footer`})]),_:1},8,[`class`])]),_:1}),s(h)?(k(),D(be,{key:0})):a(``,!0)],64)}}}),[[`__scopeId`,`data-v-483577e1`]]);export{Se as default};
//# sourceMappingURL=LayoutView-DkpBOZHn.js.map