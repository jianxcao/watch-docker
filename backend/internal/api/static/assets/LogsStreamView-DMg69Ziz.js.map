{"version":3,"file":"LogsStreamView-DMg69Ziz.js","names":["_hoisted_1","_openBlock","_createElementBlock","_createElementVNode","_hoisted_1","_openBlock","_createElementBlock","_createElementVNode"],"sources":["../../node_modules/.pnpm/@vicons+ionicons5@0.13.0/node_modules/@vicons/ionicons5/es/PlayOutline.js","../../node_modules/.pnpm/@vicons+ionicons5@0.13.0/node_modules/@vicons/ionicons5/es/StopOutline.js","../../src/components/LogsStreamView.vue","../../src/components/LogsStreamView.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'PlayOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                d: 'M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'StopOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'rect',\n              {\n                x: '96',\n                y: '96',\n                width: '320',\n                height: '320',\n                rx: '24',\n                ry: '24',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","<template>\n  <div class=\"logs-container\">\n    <Term ref=\"termRef\" :config=\"termConfig\" @ready=\"handleTermReady\" :height=\"height\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useWebSocket } from '@vueuse/core'\nimport { useMessage } from 'naive-ui'\nimport { computed, ref } from 'vue'\nimport Term, { type TermConfig } from './Term/TermView.vue'\n\ninterface Props {\n  socketUrl?: string\n  height?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  height: 'calc(90vh - 104px)',\n})\nconst message = useMessage()\nconst termRef = ref<InstanceType<typeof Term>>()\n\n// 终端配置（日志查看模式）\nconst termConfig: TermConfig = {\n  disableStdin: navigator.maxTouchPoints > 0,\n  cursorBlink: false,\n  fontSize: 13,\n  scrollback: 1000,\n  convertEol: true,\n}\n\n// 使用 VueUse 的 useWebSocket\nconst { status, close, open } = useWebSocket(props.socketUrl, {\n  autoReconnect: false,\n  immediate: false,\n  autoConnect: false,\n\n  // 直接处理消息事件，支持二进制数据\n  onMessage: (_ws, event) => {\n    if (termRef.value && event.data) {\n      // 处理二进制消息\n      if (event.data instanceof ArrayBuffer) {\n        termRef.value.write(new Uint8Array(event.data))\n      } else if (typeof event.data === 'string') {\n        // 兼容文本消息\n        termRef.value.write(event.data)\n      }\n    }\n  },\n  onConnected: (_ws) => {\n    termRef.value?.writeln('\\x1b[32m已连接到日志流\\x1b[0m\\r\\n')\n    // 设置二进制类型为 arraybuffer\n    if (_ws) {\n      _ws.binaryType = 'arraybuffer'\n    }\n  },\n  onDisconnected: () => {\n    termRef.value?.writeln('\\r\\n\\x1b[33m日志流已断开\\x1b[0m\\r\\n')\n  },\n  onError: () => {\n    termRef.value?.writeln('\\r\\n\\x1b[31m连接错误\\x1b[0m\\r\\n')\n    message.error('日志连接失败')\n  },\n})\n\n// 连接状态\nconst isConnecting = computed(() => status.value === 'CONNECTING')\nconst isConnected = computed(() => status.value === 'OPEN')\n\n// 终端就绪回调\nconst handleTermReady = () => {\n  // 终端初始化完成，可以开始连接\n  termRef.value?.writeln('\\r\\n\\x1b[33m正在连接日志流...\\x1b[0m\\r\\n')\n  open()\n}\n\n// 重新连接\nconst handleReconnect = () => {\n  close()\n  termRef.value?.clear()\n  termRef.value?.writeln('\\r\\n\\x1b[33m正在重新连接日志流...\\x1b[0m\\r\\n')\n  // 等待关闭完成后再打开\n  setTimeout(() => {\n    open()\n  }, 100)\n}\n\n// 清空日志\nconst handleClearLogs = () => {\n  termRef.value?.clear()\n}\n\ndefineExpose({\n  close,\n  handleReconnect,\n  handleClearLogs,\n  isConnecting,\n  isConnected,\n})\n</script>\n\n<style scoped lang=\"less\">\n.logs-container {\n  flex: 1;\n  overflow: hidden;\n  padding-block: 8px;\n}\n\n// 浅色主题适配\n:deep([data-theme='light']) {\n  .logs-container {\n    background: #f8f9fa;\n  }\n}\n</style>\n","<template>\n  <div class=\"logs-container\">\n    <Term ref=\"termRef\" :config=\"termConfig\" @ready=\"handleTermReady\" :height=\"height\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useWebSocket } from '@vueuse/core'\nimport { useMessage } from 'naive-ui'\nimport { computed, ref } from 'vue'\nimport Term, { type TermConfig } from './Term/TermView.vue'\n\ninterface Props {\n  socketUrl?: string\n  height?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  height: 'calc(90vh - 104px)',\n})\nconst message = useMessage()\nconst termRef = ref<InstanceType<typeof Term>>()\n\n// 终端配置（日志查看模式）\nconst termConfig: TermConfig = {\n  disableStdin: navigator.maxTouchPoints > 0,\n  cursorBlink: false,\n  fontSize: 13,\n  scrollback: 1000,\n  convertEol: true,\n}\n\n// 使用 VueUse 的 useWebSocket\nconst { status, close, open } = useWebSocket(props.socketUrl, {\n  autoReconnect: false,\n  immediate: false,\n  autoConnect: false,\n\n  // 直接处理消息事件，支持二进制数据\n  onMessage: (_ws, event) => {\n    if (termRef.value && event.data) {\n      // 处理二进制消息\n      if (event.data instanceof ArrayBuffer) {\n        termRef.value.write(new Uint8Array(event.data))\n      } else if (typeof event.data === 'string') {\n        // 兼容文本消息\n        termRef.value.write(event.data)\n      }\n    }\n  },\n  onConnected: (_ws) => {\n    termRef.value?.writeln('\\x1b[32m已连接到日志流\\x1b[0m\\r\\n')\n    // 设置二进制类型为 arraybuffer\n    if (_ws) {\n      _ws.binaryType = 'arraybuffer'\n    }\n  },\n  onDisconnected: () => {\n    termRef.value?.writeln('\\r\\n\\x1b[33m日志流已断开\\x1b[0m\\r\\n')\n  },\n  onError: () => {\n    termRef.value?.writeln('\\r\\n\\x1b[31m连接错误\\x1b[0m\\r\\n')\n    message.error('日志连接失败')\n  },\n})\n\n// 连接状态\nconst isConnecting = computed(() => status.value === 'CONNECTING')\nconst isConnected = computed(() => status.value === 'OPEN')\n\n// 终端就绪回调\nconst handleTermReady = () => {\n  // 终端初始化完成，可以开始连接\n  termRef.value?.writeln('\\r\\n\\x1b[33m正在连接日志流...\\x1b[0m\\r\\n')\n  open()\n}\n\n// 重新连接\nconst handleReconnect = () => {\n  close()\n  termRef.value?.clear()\n  termRef.value?.writeln('\\r\\n\\x1b[33m正在重新连接日志流...\\x1b[0m\\r\\n')\n  // 等待关闭完成后再打开\n  setTimeout(() => {\n    open()\n  }, 100)\n}\n\n// 清空日志\nconst handleClearLogs = () => {\n  termRef.value?.clear()\n}\n\ndefineExpose({\n  close,\n  handleReconnect,\n  handleClearLogs,\n  isConnecting,\n  isConnected,\n})\n</script>\n\n<style scoped lang=\"less\">\n.logs-container {\n  flex: 1;\n  overflow: hidden;\n  padding-block: 8px;\n}\n\n// 浅色主题适配\n:deep([data-theme='light']) {\n  .logs-container {\n    background: #f8f9fa;\n  }\n}\n</style>\n"],"mappings":"oNACA,IAAMA,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,cACV,CACD,EAAe,EAAgB,CAC7B,KAAM,cACN,OAAQ,SAAgB,EAAM,EAAQ,CACpC,OACEC,GAAY,CACZC,EACE,MACAF,EACA,AACG,EAAO,KAAK,CACXG,EACE,OACA,CACE,EAAG,0HACH,KAAM,OACN,OAAQ,eACR,oBAAqB,KACrB,eAAgB,KACjB,CACD,KACA,GACD,CACF,CACJ,EAGN,CAAC,CC/BIC,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,cACV,CACD,EAAe,EAAgB,CAC7B,KAAM,cACN,OAAQ,SAAgB,EAAM,EAAQ,CACpC,OACEC,GAAY,CACZC,EACE,MACAF,EACA,AACG,EAAO,KAAK,CACXG,EACE,OACA,CACE,EAAG,KACH,EAAG,KACH,MAAO,MACP,OAAQ,MACR,GAAI,KACJ,GAAI,KACJ,KAAM,OACN,OAAQ,eACR,kBAAmB,QACnB,eAAgB,KACjB,CACD,KACA,GACD,CACF,CACJ,EAGN,CAAC,0IEpBF,IAAM,EAAQ,EAGR,EAAU,GAAW,CACrB,EAAU,GAA+B,CAGzC,EAAyB,CAC7B,aAAc,UAAU,eAAiB,EACzC,YAAa,GACb,SAAU,GACV,WAAY,IACZ,WAAY,GACd,CAGM,CAAE,SAAQ,QAAO,QAAS,EAAa,EAAM,UAAW,CAC5D,cAAe,GACf,UAAW,GACX,YAAa,GAGb,WAAY,EAAK,IAAU,CACrB,EAAQ,OAAS,EAAM,OAErB,EAAM,gBAAgB,YACxB,EAAQ,MAAM,MAAM,IAAI,WAAW,EAAM,KAAK,CAAA,CACrC,OAAO,EAAM,MAAS,UAE/B,EAAQ,MAAM,MAAM,EAAM,KAAI,GAIpC,YAAc,GAAQ,CACpB,EAAQ,OAAO,QAAQ;EAA4B,CAE/C,IACF,EAAI,WAAa,gBAGrB,mBAAsB,CACpB,EAAQ,OAAO,QAAQ;;EAA+B,EAExD,YAAe,CACb,EAAQ,OAAO,QAAQ;;EAA6B,CACpD,EAAQ,MAAM,SAAQ,EAEzB,CAAA,CAGK,EAAe,MAAe,EAAO,QAAU,aAAY,CAC3D,EAAc,MAAe,EAAO,QAAU,OAAM,CAGpD,MAAwB,CAE5B,EAAQ,OAAO,QAAQ;;EAAmC,CAC1D,GAAK,SAmBP,EAAa,CACX,QACA,oBAjB4B,CAC5B,GAAM,CACN,EAAQ,OAAO,OAAM,CACrB,EAAQ,OAAO,QAAQ;;EAAqC,CAE5D,eAAiB,CACf,GAAK,EACJ,IAAG,EAWN,oBAP4B,CAC5B,EAAQ,OAAO,OAAM,EAOrB,eACA,cACD,CAAA,aAlGC,EAEM,MAFN,EAEM,CADJ,EAAqF,EAAA,SAA3E,UAAJ,IAAI,EAAW,OAAQ,EAAa,QAAO,EAAkB,OAAQ,EAAA"}