import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{$ as t,$t as n,Bn as r,Gt as i,H as a,Ht as o,Jt as s,Kt as c,Ln as l,Qt as u,R as d,Rn as f,U as p,W as m,Yt as h,Zt as g,hn as _,in as v,it as y,j as b,kn as x,n as S,qt as C,tn as w,un as T,yn as E}from"./ui-CdsL-WMe.js";import{n as D,t as O,v as k}from"./index-KvlnPhMc.js";import{t as ee}from"./CloudDownloadOutline-CsoTk8An.js";import{t as A}from"./CloudUploadOutline-BHaW-Y08.js";import{t as j}from"./DownloadOutline-C4KnaRUa.js";import{t as te}from"./InformationCircleOutline-DxVonW4c.js";import{t as M}from"./LogsStreamView-DMg69Ziz.js";import{t as N}from"./RefreshOutline-DFsFZU2a.js";import{t as P}from"./SyncOutline-DdAvW8IC.js";import{t as F}from"./TrashOutline-BLUdX-Eg.js";import{t as I}from"./container-BbVEwPu1.js";import{a as L,l as R,n as z,o as B,t as V}from"./utils-5F9W9oaT.js";import{t as H}from"./compose-BeaxuMAs.js";import{t as U}from"./log-BiY5VKye.js";import{t as W}from"./hartLine-ca9X-LCq.js";import{t as G}from"./cpu-xpYWQlJU.js";import{t as K}from"./overflowMenuVertical-DNua2xYl.js";var q={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},J=n({name:`DocumentTextOutline`,render:function(e,t){return T(),h(`svg`,q,t[0]||=[c(`path`,{d:`M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z`,fill:`none`,stroke:`currentColor`,"stroke-linejoin":`round`,"stroke-width":`32`},null,-1),c(`path`,{d:`M256 56v120a32 32 0 0 0 32 32h120`,fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`},null,-1),c(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M176 288h160`},null,-1),c(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M176 368h160`},null,-1)])}}),Y={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},X=n({name:`PlayCircleOutline`,render:function(e,t){return T(),h(`svg`,Y,t[0]||=[c(`path`,{d:`M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z`,fill:`none`,stroke:`currentColor`,"stroke-miterlimit":`10`,"stroke-width":`32`},null,-1),c(`path`,{d:`M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z`,fill:`currentColor`},null,-1)])}}),Z={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},Q=n({name:`StopCircleOutline`,render:function(e,t){return T(),h(`svg`,Z,t[0]||=[c(`path`,{d:`M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z`,fill:`none`,stroke:`currentColor`,"stroke-miterlimit":`10`,"stroke-width":`32`},null,-1),c(`path`,{d:`M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z`,fill:`currentColor`},null,-1)])}}),ne={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},re=n({name:`TimeOutline`,render:function(e,t){return T(),h(`svg`,ne,t[0]||=[c(`path`,{d:`M256 64C150 64 64 150 64 256s86 192 192 192s192-86 192-192S362 64 256 64z`,fill:`none`,stroke:`currentColor`,"stroke-miterlimit":`10`,"stroke-width":`32`},null,-1),c(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M256 128v144h96`},null,-1)])}}),ie={xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,fill:`none`};function ae(e,t){return T(),h(`svg`,ie,[...t[0]||=[c(`path`,{stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z`},null,-1),c(`path`,{stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`m3.3 7 8.7 5 8.7-5M12 22V12`},null,-1)]])}var oe={render:ae},se={xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,fill:`none`};function ce(e,t){return T(),h(`svg`,se,[...t[0]||=[c(`path`,{stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`1.333`,d:`M5.333 1.333V4M10.667 1.333V4M12.667 2.667H3.333C2.597 2.667 2 3.264 2 4v9.333c0 .737.597 1.334 1.333 1.334h9.334c.736 0 1.333-.597 1.333-1.334V4c0-.736-.597-1.333-1.333-1.333M2 6.667h12`},null,-1)]])}var le={render:ce},ue={xmlns:`http://www.w3.org/2000/svg`,width:`13`,height:`12`,fill:`none`};function de(e,t){return T(),h(`svg`,ue,[...t[0]||=[c(`g`,{stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"clip-path":`url(#a)`},[c(`path`,{d:`M3.219 9.5V8M5.219 9.5V8M7.219 9.5V8M9.219 9.5V8M4.219 5.5v-1M8.219 5.5v-1M6.219 5.5v-1M1.219 7.5h10M1.219 3.5a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v.55a1 1 0 0 0 0 1.918V8.5a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1V5.95a1 1 0 0 0 0-1.918z`})],-1),c(`defs`,null,[c(`clipPath`,{id:`a`},[c(`path`,{fill:`currentColor`,d:`M.219 0h12v12h-12z`})])],-1)]])}var fe={render:de},pe=n({__name:`RunningStatusBadge`,props:{container:{}},setup(e){let t=e,n=i(()=>t.container.running?`success`:`default`),a=i(()=>t.container.running?`运行中`:`已停止`),o=i(()=>t.container.running?X:Q);return(e,t)=>{let i=p,s=y;return T(),C(s,{type:n.value,size:`small`,round:``},{icon:E(()=>[u(i,{component:o.value},null,8,[`component`])]),default:E(()=>[g(` `+r(a.value),1)]),_:1},8,[`type`])}}}),me=e(k(),1),he=[`data-theme`],ge={class:`card-content`},_e={class:`container-header`},ve={class:`container-logo`},ye={class:`absolute -top-1 -right-1`},be={class:`container-basic-info`},xe={class:`container-name`},Se={class:`container-image`},Ce={class:`truncate w-full block`},we={class:`container-status`},Te={class:`container-details`},Ee={class:`detail-row`},De={class:`detail-item`},Oe={class:`detail-label`},ke={class:`detail-label`},Ae={class:`detail-item`},je={class:`detail-value min-w-[152px]`},Me={class:`detail-value`},Ne={class:`container-stats`},Pe={class:`flex flex-row justify-between items-center mb-2`},Fe={key:0,class:`flex flex-row gap-2`},Ie={class:`stat-header`},Le={class:`stats-grid`},Re={class:`stat-item`},ze={class:`stat-header`},Be={class:`stat-value`},Ve={class:`stat-item`},$={class:`stat-header`},He={class:`stat-value`},Ue={class:`stat-item`},We={class:`stat-header`},Ge={class:`network-rate`},Ke={class:`stat-item`},qe={class:`stat-header`},Je={class:`network-rate`},Ye=O(n({__name:`ContainerCard`,props:{container:{},loading:{type:Boolean,default:!1}},emits:[`start`,`stop`,`restart`,`update`,`delete`,`export`,`logs`,`detail`],setup(e,{emit:n}){let d=D(),_=e,v=S(),y=n,b=i(()=>_.container.stats||{cpuPercent:0,memoryUsage:0,memoryPercent:0,networkRxRate:0,networkTxRate:0}),x=I(),O=i(()=>x.isContainerUpdating(_.container.id)),k=i(()=>({color:_.container.running?`bg-emerald-500`:`bg-slate-500`,pulseColor:_.container.running?`bg-emerald-400`:`bg-slate-400`})),M=e=>e?(0,me.default)(e).format(`YYYY-MM-DD HH:mm`):`-`,R=e=>!e||e.length===0?`-`:e.filter(e=>e.publicPort).map(e=>`${e.publicPort}:${e.privatePort}`)[0]||`-`,H=i(()=>{let e=[{key:`detail`,label:`查看详情`,icon:()=>w(p,null,{default:()=>w(te)})},{key:`logs`,label:`查看日志`,icon:()=>w(p,null,{default:()=>w(U)})},{type:`divider`,key:`divider1`}];return _.container.status===`UpdateAvailable`&&e.push({key:`update`,label:`更新容器`,icon:()=>w(p,null,{default:()=>w(P)}),disabled:_.loading}),_.container.running?e.push({key:`restart`,label:`重启容器`,icon:()=>w(p,null,{default:()=>w(N)}),disabled:_.loading},{key:`stop`,label:`停止容器`,icon:()=>w(p,null,{default:()=>w(Q)}),disabled:_.loading}):e.push({key:`start`,label:`启动容器`,icon:()=>w(p,null,{default:()=>w(X)}),disabled:_.loading}),e.push({key:`export`,label:`导出容器`,icon:()=>w(p,null,{default:()=>w(j)})},{type:`divider`,key:`divider2`},{key:`delete`,label:`删除容器`,icon:()=>w(p,{color:v.value.errorColor},{default:()=>w(F)}),disabled:_.loading}),e}),q=e=>{switch(e){case`detail`:y(`detail`);break;case`start`:y(`start`);break;case`stop`:y(`stop`);break;case`restart`:y(`restart`);break;case`update`:y(`update`);break;case`export`:y(`export`);break;case`delete`:y(`delete`);break;case`logs`:y(`logs`);break}},J=()=>{y(`detail`)};return(n,i)=>{let _=m,v=t,y=a;return T(),h(`div`,{class:f([`container-card`,{"card-updating":O.value}]),"data-theme":l(d).setting.theme,onClick:J},[c(`div`,{class:f([`status-bar`,e.container.running?`running`:`stopped`])},null,2),c(`div`,ge,[c(`div`,_e,[c(`div`,ve,[u(l(p),{size:`24`},{default:E(()=>[u(l(oe))]),_:1}),c(`div`,ye,[c(`div`,{class:f([`w-4 h-4 rounded-full flex items-center justify-center`,k.value.color])},[e.container.running?(T(),h(`div`,{key:0,class:f([`w-2 h-2 rounded-full`,k.value.pulseColor])},null,2)):s(``,!0)],2)])]),c(`div`,be,[u(_,{delay:500},{trigger:E(()=>[c(`div`,xe,r(e.container.name),1)]),default:E(()=>[c(`span`,null,r(e.container.name),1)]),_:1}),c(`div`,Se,[u(_,{delay:500},{trigger:E(()=>[c(`span`,Ce,r(e.container.image),1)]),default:E(()=>[c(`span`,null,r(e.container.image),1)]),_:1}),e.container.status===`UpdateAvailable`?(T(),C(_,{key:0,delay:500},{trigger:E(()=>[...i[1]||=[c(`div`,{class:`absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full cursor-help`},[c(`div`,{class:`w-full h-full bg-orange-400 rounded-full animate-ping`})],-1)]]),default:E(()=>[i[2]||=c(`span`,null,`可更新`,-1)]),_:1})):s(``,!0)])]),c(`div`,we,[u(pe,{container:e.container},null,8,[`container`]),u(y,{options:H.value,onSelect:q,trigger:`click`},{default:E(()=>[u(v,{quaternary:``,circle:``,onClick:i[0]||=o(()=>{},[`stop`])},{icon:E(()=>[u(l(p),null,{default:E(()=>[u(l(K))]),_:1})]),_:1})]),_:1},8,[`options`])])]),c(`div`,Te,[c(`div`,Ee,[c(`div`,De,[c(`div`,Oe,[u(l(p),{size:`16`},{default:E(()=>[u(l(le))]),_:1}),i[3]||=g(` 创建时间 `,-1)]),c(`div`,ke,[u(l(p),{size:`16`},{default:E(()=>[u(l(W))]),_:1}),i[4]||=g(` 端口映射 `,-1)])]),c(`div`,Ae,[c(`div`,je,r(M(e.container.startedAt)),1),c(`div`,Me,r(R(e.container.ports)),1)])])]),c(`div`,Ne,[c(`div`,Pe,[i[6]||=c(`div`,{class:`stats-title`},`资源使用情况`,-1),e.container.running?(T(),h(`div`,Fe,[c(`div`,Ie,[u(l(p),{size:`12`},{default:E(()=>[u(l(re))]),_:1}),i[5]||=c(`span`,null,`运行时长`,-1)]),c(`div`,{class:f([`time-value`,e.container.running?`running`:`stopped`])},r(e.container.running&&e.container.startedAt?l(B)(e.container.startedAt):`-`),3)])):s(``,!0)]),c(`div`,Le,[c(`div`,Re,[c(`div`,ze,[u(l(p),{size:`12`},{default:E(()=>[u(l(G))]),_:1}),i[7]||=c(`span`,null,`CPU`,-1)]),c(`div`,Be,r(l(L)(b.value.cpuPercent)),1)]),c(`div`,Ve,[c(`div`,$,[u(l(p),{size:`12`},{default:E(()=>[u(l(fe))]),_:1}),i[8]||=c(`span`,null,`内存`,-1)]),c(`div`,He,r(l(V)(b.value.memoryUsage)),1)]),c(`div`,Ue,[c(`div`,We,[u(l(p),{size:`12`},{default:E(()=>[u(l(ee))]),_:1}),i[9]||=c(`span`,null,`下载`,-1)]),c(`div`,Ge,r(l(z)(b.value.networkRxRate)),1)]),c(`div`,Ke,[c(`div`,qe,[u(l(p),{size:`12`},{default:E(()=>[u(l(A))]),_:1}),i[10]||=c(`span`,null,`上传`,-1)]),c(`div`,Je,r(l(z)(b.value.networkTxRate)),1)])])])])],10,he)}}}),[[`__scopeId`,`data-v-338423f3`]]),Xe=n({__name:`ContainerLogsModal`,props:v({container:{}},{show:{type:Boolean},showModifiers:{}}),emits:[`update:show`],setup(e){let n=e,r=_(e,`show`),a=D(),o=S(),s=x(),c=i(()=>s.value?.isConnecting),f=i(()=>s.value?.isConnected),m=i(()=>n.container?.name?`容器日志 - ${n.container.name}`:`容器日志`),h=()=>R(H,{color:o.value.primaryColor,size:20}),v=i(()=>{if(!n.container)return;let e=a.getToken();return`${window.location.protocol===`https:`?`wss:`:`ws:`}//${window.location.host}/api/v1/containers/logs/${n.container.id}/ws?token=${e}&id=${encodeURIComponent(n.container.id)}&projectName=${encodeURIComponent(n.container.name)}`}),y=()=>{s.value?.close()},w=()=>{s.value?.handleReconnect()},O=()=>{s.value?.handleClearLogs()};return(e,n)=>{let i=p,a=t,o=b,_=d;return T(),C(_,{show:r.value,"onUpdate:show":n[1]||=e=>r.value=e,icon:h(),"display-directive":`if`,preset:`dialog`,title:m.value,class:`compose-logs-modal`,contentClass:`compose-logs-modal-content`,style:{padding:`8px`,width:`90vw`,maxWidth:`1200px`,height:`90vh`},"mask-closable":!1,closable:!0,onAfterLeave:y},{action:E(()=>[u(o,{justify:`end`},{default:E(()=>[u(a,{onClick:w,disabled:c.value||f.value},{icon:E(()=>[u(i,null,{default:E(()=>[u(l(N))]),_:1})]),default:E(()=>[n[2]||=g(` 重新连接 `,-1)]),_:1},8,[`disabled`]),u(a,{onClick:O},{icon:E(()=>[u(i,null,{default:E(()=>[u(l(F))]),_:1})]),default:E(()=>[n[3]||=g(` 清空日志 `,-1)]),_:1}),u(a,{onClick:n[0]||=e=>r.value=!1},{default:E(()=>[...n[4]||=[g(`关闭`,-1)]]),_:1})]),_:1})]),default:E(()=>[u(M,{ref_key:`logsStreamViewRef`,ref:s,"socket-url":v.value},null,8,[`socket-url`])]),_:1},8,[`show`,`icon`,`title`])}}});export{Ye as n,J as r,Xe as t};
//# sourceMappingURL=ContainerLogsModal-CQm0hYa9.js.map