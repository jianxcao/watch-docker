import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{$ as t,$t as n,Bn as r,F as i,Gt as a,Jt as o,Kt as s,Ln as c,Qt as l,Rn as u,U as d,Ut as f,W as ee,Wt as te,Yt as p,Zt as m,c as h,cn as g,fn as ne,kn as _,o as v,qt as y,un as b,yn as x}from"./ui-CdsL-WMe.js";import{i as S}from"./common-B7iQJWwr.js";import{n as re,r as ie,t as C,v as w}from"./index-KvlnPhMc.js";import{t as T}from"./app-CSclzxOM.js";import{t as E}from"./AddCircleOutline-CgU-IXa-.js";import{t as D}from"./ArchiveOutline-CZXbpvQu.js";import{t as O}from"./CloudDownloadOutline-CsoTk8An.js";import{t as k}from"./LayersOutline-CZcJsfbA.js";import{t as A}from"./RefreshOutline-DFsFZU2a.js";import{t as j}from"./container-BbVEwPu1.js";import"./utils-5F9W9oaT.js";import{t as M}from"./image-Bt3Khyum.js";import{n as N,t as P}from"./hartLine-ca9X-LCq.js";var F={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 512 512`},I=n({name:`TrashBinOutline`,render:function(e,t){return b(),p(`svg`,F,t[0]||=[s(`path`,{d:`M432 144l-28.67 275.74A32 32 0 0 1 371.55 448H140.46a32 32 0 0 1-31.78-28.26L80 144`,fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`},null,-1),s(`rect`,{x:`32`,y:`64`,width:`448`,height:`80`,rx:`16`,ry:`16`,fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`},null,-1),s(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M312 240L200 352`},null,-1),s(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`32`,d:`M312 352L200 240`},null,-1)])}}),L={xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,"aria-hidden":`true`,class:`lucide lucide-server h-5 w-5`,viewBox:`0 0 24 24`};function R(e,t){return b(),p(`svg`,L,[...t[0]||=[s(`rect`,{width:`20`,height:`8`,x:`2`,y:`2`,rx:`2`,ry:`2`},null,-1),s(`rect`,{width:`20`,height:`8`,x:`2`,y:`14`,rx:`2`,ry:`2`},null,-1),s(`path`,{d:`M6 6h.01M6 18h.01`},null,-1)]])}var z={render:R},B=e(w(),1),V={class:`home-page`},H={class:`stats-grid`},U={class:`stat-card container-card`},W={class:`card-header`},G={class:`icon-container`},K={class:`card-content`},q={class:`stat-item`},J={class:`stat-value value-blue`},Y={class:`stat-item`},ae={class:`stat-value value-green`},oe={class:`stat-item`},se={class:`stat-value value-gray`},ce={class:`stat-item`},le={class:`stat-value value-orange`},ue={class:`stat-card image-card`},de={class:`card-header`},fe={class:`icon-container`},pe={class:`card-content`},me={class:`stat-item`},he={class:`stat-value value-purple`},ge={class:`stat-item`},_e={class:`stat-value value-pink`},ve={class:`stat-card system-card`},ye={class:`card-header`},be={class:`icon-container`},xe={class:`card-content`},Se={class:`stat-item`},Ce={class:`stat-value value-teal`},we={class:`stat-item`},Te={class:`stat-value value-teal`},Ee={class:`stat-item`},De={class:`system-badge`},Oe={class:`quick-actions`},ke={class:`card-header`},Ae={class:`actions-content`},je={key:0,class:`recent-containers`},Me={class:`card-header`},Ne={class:`container-list`},Pe=[`onClick`],Fe={class:`item-left`},Ie={class:`container-info`},Le={class:`container-name`},Re={class:`container-image`},ze={class:`item-right`},Be={class:`welcome-card`},Ve={class:`text-xs pl-1`},X=C(n({__name:`HomeView`,setup(e){let n=S(),C=T(),w=j(),F=M(),L=N(),R=re(),X=i(),Z=_(!1),He=a(()=>R.systemInfo?.version),Q=a(()=>{switch(C.systemHealth){case`healthy`:return`ç³»ç»Ÿæ­£å¸¸`;case`unhealthy`:return`ç³»ç»Ÿå¼‚å¸¸`;default:return`çŠ¶æ€æœªçŸ¥`}}),Ue=a(()=>{switch(C.systemHealth){case`healthy`:return`ğŸŸ¢`;case`unhealthy`:return`ğŸ”´`;default:return`ğŸŸ¡`}}),We=a(()=>C.lastRefreshTime?(0,B.default)(C.lastRefreshTime).format(`MM-DD HH:mm:ss`):`ä»æœª`),$=a(()=>w.containers.slice().sort((e,t)=>new Date(t.lastCheckedAt).getTime()-new Date(e.lastCheckedAt).getTime()).slice(0,5)),Ge=async()=>{await L.handleBatchUpdate()},Ke=async()=>{C.setGlobalLoading(!0);try{await Promise.all([w.fetchContainers(),F.fetchImages()]),C.updateRefreshTime()}finally{C.setGlobalLoading(!1)}},qe=async()=>{Z.value=!0;try{let e=await ie.container.pruneSystem();e.code===0?(X.success(e.data.message||`ç³»ç»Ÿæ¸…ç†å®Œæˆ`),await Promise.all([w.fetchContainers(),F.fetchImages()])):X.error(e.msg||`ç³»ç»Ÿæ¸…ç†å¤±è´¥`)}catch(e){X.error(e.message||`ç³»ç»Ÿæ¸…ç†å¤±è´¥`)}finally{Z.value=!1}},Je=()=>{n.push(`/compose/create`)},Ye=e=>{n.push(`/containers/${e}`)};return g(async()=>{w.containers.length===0&&await w.fetchContainers(!0,!1),F.images.length===0&&await F.fetchImages()}),(e,n)=>{let i=d,a=t,g=ee,_=h,S=v;return b(),p(`div`,V,[s(`div`,H,[s(`div`,U,[s(`div`,W,[s(`div`,G,[l(c(k))]),n[0]||=s(`div`,{class:`card-title`},`å®¹å™¨çŠ¶æ€`,-1)]),s(`div`,K,[s(`div`,q,[n[1]||=s(`span`,{class:`stat-label`},`æ€»å®¹å™¨`,-1),s(`span`,J,r(c(w).stats.total),1)]),s(`div`,Y,[n[2]||=s(`span`,{class:`stat-label`},`è¿è¡Œä¸­`,-1),s(`span`,ae,r(c(w).stats.running),1)]),s(`div`,oe,[n[3]||=s(`span`,{class:`stat-label`},`å·²åœæ­¢`,-1),s(`span`,se,r(c(w).stats.stopped),1)]),s(`div`,ce,[n[4]||=s(`span`,{class:`stat-label`},`æ­£åœ¨æ›´æ–°`,-1),s(`span`,le,r(c(w).stats.updateable),1)])])]),s(`div`,ue,[s(`div`,de,[s(`div`,fe,[l(c(D))]),n[5]||=s(`div`,{class:`card-title`},`é•œåƒä¿¡æ¯`,-1)]),s(`div`,pe,[s(`div`,me,[n[6]||=s(`span`,{class:`stat-label`},`æ€»é•œåƒ`,-1),s(`span`,he,r(c(F).stats.total),1)]),s(`div`,ge,[n[7]||=s(`span`,{class:`stat-label`},`æœ€å¤§çš„`,-1),s(`span`,_e,r(c(F).stats.formattedTotalSize),1)])])]),s(`div`,ve,[s(`div`,ye,[s(`div`,be,[l(c(z))]),n[8]||=s(`div`,{class:`card-title`},`ç³»ç»Ÿä¿¡æ¯`,-1)]),s(`div`,xe,[s(`div`,Se,[n[9]||=s(`span`,{class:`stat-label`},`åç«¯ç‰ˆæœ¬`,-1),s(`span`,Ce,r(He.value),1)]),s(`div`,{class:`stat-item`},[n[10]||=s(`span`,{class:`stat-label`},`å‰ç«¯ç‰ˆæœ¬`,-1),s(`span`,{class:`stat-value value-teal`},r(`v0.1.6`))]),s(`div`,we,[n[11]||=s(`span`,{class:`stat-label`},`åˆ·æ–°æ—¶é—´`,-1),s(`span`,Te,r(We.value),1)]),s(`div`,Ee,[n[12]||=s(`span`,{class:`stat-label`},`ç³»ç»ŸçŠ¶æ€`,-1),s(`span`,De,r(Q.value),1)])])])]),s(`div`,Oe,[s(`div`,ke,[l(c(P),{class:`header-icon`}),n[13]||=s(`div`,{class:`card-title`},`å¿«é€Ÿæ“ä½œ`,-1)]),s(`div`,Ae,[c(w).updateableContainers.length>0?(b(),y(a,{key:0,class:`action-warning`,size:`large`,onClick:Ge,loading:c(w).batchUpdating},{icon:x(()=>[l(i,null,{default:x(()=>[l(c(O))]),_:1})]),default:x(()=>[m(` æ‰¹é‡æ›´æ–°å®¹å™¨ (`+r(c(w).updateableContainers.length)+`) `,1)]),_:1},8,[`loading`])):o(``,!0),l(a,{class:`action-primary`,size:`large`,onClick:Je},{icon:x(()=>[l(i,null,{default:x(()=>[l(c(E))]),_:1})]),default:x(()=>[n[14]||=m(` åˆ›å»ºåº”ç”¨ `,-1)]),_:1}),l(a,{class:`action-primary`,size:`large`,onClick:Ke,loading:c(C).globalLoading},{icon:x(()=>[l(i,null,{default:x(()=>[l(c(A))]),_:1})]),default:x(()=>[n[15]||=m(` åˆ·æ–°æ‰€æœ‰æ•°æ® `,-1)]),_:1},8,[`loading`]),l(g,{trigger:`hover`,delay:500},{trigger:x(()=>[l(a,{class:`action-warning`,size:`large`,onClick:qe,loading:Z.value},{icon:x(()=>[l(i,null,{default:x(()=>[l(c(I))]),_:1})]),default:x(()=>[n[16]||=m(` ç³»ç»Ÿæ¸…ç† `,-1)]),_:1},8,[`loading`])]),default:x(()=>[n[17]||=m(` æ¸…ç†æ‚¬ç©ºé•œåƒã€ç½‘ç»œå’Œæ•°æ®å· `,-1)]),_:1})])]),$.value.length>0?(b(),p(`div`,je,[s(`div`,Me,[l(c(k),{class:`header-icon`}),n[18]||=s(`div`,{class:`card-title`},`æœ€è¿‘æ£€æµ‹çš„å®¹å™¨`,-1)]),s(`div`,Ne,[(b(!0),p(f,null,ne($.value,e=>(b(),p(`div`,{key:e.id,class:`container-item`,onClick:t=>Ye(e.id)},[s(`div`,Fe,[s(`div`,{class:u([`container-icon`,{"status-running":e.running,"status-stopped":!e.running}])},[l(c(k))],2),s(`div`,Ie,[s(`div`,Le,r(e.name),1),s(`div`,Re,r(e.image),1)])]),s(`div`,ze,[s(`span`,{class:u([`container-badge`,{"badge-running":e.running,"badge-stopped":!e.running}])},r(e.running?`è¿è¡Œä¸­`:`å·²åœæ­¢`),3)])],8,Pe))),128))])])):o(``,!0),(b(),y(te,{to:`#header`,defer:``},[s(`div`,Be,[s(`div`,null,[l(_,{class:`m-0 text-lg`},{default:x(()=>[n[19]||=m(`é¦–é¡µ`,-1),s(`span`,Ve,r(Ue.value),1)]),_:1}),l(S,{depth:`3`,class:`text-xs max-md:hidden`},{default:x(()=>[...n[20]||=[m(` Docker å®¹å™¨å’Œé•œåƒç®¡ç†å·¥å…·ï¼Œè‡ªåŠ¨æ£€æµ‹æ›´æ–°å¹¶ç®¡ç†æ‚¨çš„å®¹å™¨ `,-1)]]),_:1})])])]))])}}}),[[`__scopeId`,`data-v-c1753df8`]]);export{X as default};
//# sourceMappingURL=HomeView-CXIyi_AQ.js.map