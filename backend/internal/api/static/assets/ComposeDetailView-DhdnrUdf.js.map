{"version":3,"file":"ComposeDetailView-DhdnrUdf.js","names":[],"sources":["../../src/pages/ComposeDetailView.vue","../../src/pages/ComposeDetailView.vue"],"sourcesContent":["<template>\n  <div class=\"compose-detail-page\">\n    <!-- 页面头部 -->\n    <Teleport to=\"#header\" defer>\n      <div class=\"page-header\">\n        <div class=\"flex items-center gap-3\">\n          <n-button text circle @click=\"handleBack\">\n            <template #icon>\n              <n-icon size=\"20\">\n                <ArrowBackOutline />\n              </n-icon>\n            </template>\n          </n-button>\n          <n-h2 class=\"m-0 text-lg\">{{ projectName }}</n-h2>\n          <div\n            v-if=\"currentProject\"\n            class=\"status-badge\"\n            :class=\"'status-' + currentProject.status\"\n          >\n            <span class=\"status-dot\"></span>\n            <span class=\"status-text\">{{ getStatusText(currentProject.status) }}</span>\n          </div>\n        </div>\n        <n-dropdown :options=\"dropdownOptions\" @select=\"handleMenuSelect\" trigger=\"click\">\n          <n-button text circle>\n            <template #icon>\n              <n-icon size=\"18\">\n                <EllipsisHorizontal />\n              </n-icon>\n            </template>\n          </n-button>\n        </n-dropdown>\n      </div>\n    </Teleport>\n\n    <!-- 加载状态 -->\n    <n-spin :show=\"loading\" class=\"h-[300px] flex items-center justify-center\" v-if=\"loading\">\n    </n-spin>\n    <template v-else>\n      <div v-if=\"!currentProject\" class=\"empty-state\">\n        <n-empty description=\"项目不存在\">\n          <template #extra>\n            <n-button @click=\"handleBack\">返回列表</n-button>\n          </template>\n        </n-empty>\n      </div>\n\n      <!-- Tabs 内容 -->\n      <n-tabs\n        v-else\n        type=\"line\"\n        animated\n        pane-class=\"compose-detail-pane\"\n        :pane-style=\"{ height: tabHeight }\"\n        :default-value=\"activeTab\"\n        @update:value=\"handleTabChange\"\n      >\n        <!-- Tab 1: 容器列表 -->\n        <n-tab-pane name=\"containers\" tab=\"容器\">\n          <template #tab>\n            <div class=\"flex items-center gap-2\">\n              <n-icon size=\"18\">\n                <LayersOutline />\n              </n-icon>\n              <span>容器</span>\n              <n-badge\n                v-if=\"projectContainers.length > 0\"\n                :value=\"projectContainers.length\"\n                :max=\"99\"\n                show-zero\n                type=\"info\"\n              />\n            </div>\n          </template>\n\n          <div class=\"tab-content\">\n            <div v-if=\"projectContainers.length === 0\" class=\"empty-container\">\n              <n-empty description=\"该项目下没有容器\" />\n            </div>\n            <div\n              v-else\n              class=\"containers-grid\"\n              :class=\"{\n                'grid-cols-1': isMobile,\n                'grid-cols-2': isTablet || isLaptop,\n                'grid-cols-3': isDesktop,\n                'grid-cols-4': isDesktopLarge,\n              }\"\n            >\n              <ContainerCard\n                v-for=\"container in projectContainers\"\n                :key=\"container.id\"\n                :container=\"container\"\n                @start=\"handleStartContainer(container)\"\n                @stop=\"handleStopContainer(container)\"\n                @restart=\"handleRestartContainer(container)\"\n                @update=\"handleUpdateContainer(container)\"\n                @delete=\"handleDeleteContainer(container)\"\n                @export=\"handleExportContainer(container)\"\n                @logs=\"handleViewContainerLogs(container)\"\n                @detail=\"handleViewContainerDetail(container)\"\n              />\n            </div>\n          </div>\n        </n-tab-pane>\n\n        <!-- Tab 2: YAML 编辑 -->\n        <n-tab-pane name=\"yaml\" tab=\"配置\">\n          <template #tab>\n            <div class=\"flex items-center gap-2\">\n              <n-icon size=\"18\">\n                <DocumentTextOutline />\n              </n-icon>\n              <span>配置</span>\n            </div>\n          </template>\n\n          <div class=\"tab-content yaml-tab\">\n            <n-spin :show=\"yamlLoading\" class=\"h-full\" v-if=\"yamlLoading\"> </n-spin>\n            <div v-else class=\"yaml-card\">\n              <div ref=\"yamlEditorContainerRef\" :style=\"{ height: 'calc(100% - 42px)' }\">\n                <YamlEditor\n                  v-model=\"yamlContent\"\n                  placeholder=\"请输入 docker-compose.yml 配置内容\"\n                  :min-height=\"yamlEditorMinHeight\"\n                  :max-height=\"yamlEditorMinHeight\"\n                  @change=\"handleYamlChange\"\n                />\n              </div>\n              <div class=\"flex justify-end gap-2 items-center px-2 h-[42px]\">\n                <n-text depth=\"3\" class=\"text-xs\" :style=\"{ color: theme.errorColor }\">\n                  {{ yamlValidationMessage }}\n                </n-text>\n                <n-button\n                  type=\"primary\"\n                  size=\"small\"\n                  :disabled=\"!isYamlValid || deployLoading\"\n                  :loading=\"deployLoading\"\n                  @click=\"handleDeploy\"\n                >\n                  <template #icon>\n                    <n-icon>\n                      <RefreshOutline />\n                    </n-icon>\n                  </template>\n                  {{ isYamlModified ? '保存并重新部署' : '重新部署' }}\n                </n-button>\n              </div>\n            </div>\n          </div>\n        </n-tab-pane>\n\n        <!-- Tab 3: 日志 -->\n        <n-tab-pane name=\"logs\" tab=\"日志\">\n          <template #tab>\n            <div class=\"flex items-center gap-2\">\n              <n-icon size=\"18\">\n                <DocumentIcon />\n              </n-icon>\n              <span>日志</span>\n            </div>\n          </template>\n\n          <div class=\"tab-content logs-tab\">\n            <LogsStreamView\n              class=\"logs-stream-view\"\n              v-if=\"activeTab === 'logs' && currentProject\"\n              :socket-url=\"logsSocketUrl\"\n              height=\"100%\"\n            />\n          </div>\n        </n-tab-pane>\n      </n-tabs>\n    </template>\n\n    <!-- 容器日志弹窗 -->\n    <ContainerLogsModal v-model:show=\"showContainerLogsModal\" :container=\"currentContainer\" />\n    <!-- 重新部署进度组件 -->\n    <ComposeCreateProgress\n      ref=\"createProgressRef\"\n      :show=\"showProgress\"\n      :project-name=\"projectName\"\n      :yaml-content=\"yamlContent\"\n      :force=\"true\"\n      @success=\"handleDeploySuccess\"\n      @error=\"handleDeployError\"\n      @complete=\"handleDeployComplete\"\n    />\n    <!-- Pull 日志弹窗 -->\n    <ComposePullLogsModal v-model:show=\"showPullLogs\" :project=\"currentProject || null\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useDialog, useMessage, useThemeVars, type DropdownOption } from 'naive-ui'\nimport {\n  ArrowBackOutline,\n  LayersOutline,\n  DocumentTextOutline,\n  RefreshOutline,\n  ReloadOutline,\n  TrashOutline,\n  PlayOutline,\n  StopOutline,\n  EllipsisHorizontal,\n  CloudDownloadOutline,\n} from '@vicons/ionicons5'\nimport DocumentIcon from '@/assets/svg/log.svg?component'\nimport { useComposeStore } from '@/store/compose'\nimport { useContainerStore } from '@/store/container'\nimport { useSettingStore } from '@/store/setting'\nimport { useResponsive } from '@/hooks/useResponsive'\nimport { useContainer } from '@/hooks/useContainer'\nimport type { ComposeProject, ContainerStatus } from '@/common/types'\nimport { renderIcon, validateComposeYaml } from '@/common/utils'\nimport ContainerCard from '@/components/ContainerCard.vue'\nimport ContainerLogsModal from '@/components/ContainerLogsModal.vue'\nimport LogsStreamView from '@/components/LogsStreamView.vue'\nimport YamlEditor from '@/components/YamlEditor/index.vue'\nimport ComposeCreateProgress from '@/components/ComposeCreateProgress.vue'\nimport ComposePullLogsModal from '@/components/ComposePullLogsModal.vue'\nimport { useCompose } from '@/hooks/useCompose'\n\nconst route = useRoute()\nconst router = useRouter()\nconst message = useMessage()\nconst dialog = useDialog()\nconst theme = useThemeVars()\nconst composeStore = useComposeStore()\nconst containerStore = useContainerStore()\nconst settingStore = useSettingStore()\nconst { isMobile, isTablet, isLaptop, isDesktop, isDesktopLarge } = useResponsive()\nconst { handleStart, handleStop, handleRestart, handleUpdate, handleDelete, handleExport } = useContainer()\nconst {\n  handleStart: handleComposeStart,\n  handleStop: handleComposeStop,\n  handleDelete: handleComposeDelete,\n  handleRestart: handleComposeRestart,\n} = useCompose()\n\n// 状态\nconst projectName = ref(route.params.projectName as string)\nconst activeTab = ref('containers')\nconst loading = ref(false)\nconst yamlLoading = ref(false)\nconst deployLoading = ref(false)\nconst yamlContent = ref('')\nconst originalYamlContent = ref('')\nconst yamlValidationMessage = ref('')\nconst isYamlValid = ref(true)\nconst showContainerLogsModal = ref(false)\nconst currentContainer = ref<ContainerStatus | null>(null)\nconst yamlEditorContainerRef = ref<HTMLElement | null>(null)\nconst createProgressRef = ref<InstanceType<typeof ComposeCreateProgress>>()\nconst showProgress = ref(false)\nconst showPullLogs = ref(false)\n\n// 下拉菜单选项\nconst dropdownOptions = computed<DropdownOption[]>(() => {\n  const options: DropdownOption[] = []\n  const status = currentProject.value?.status\n  // 根据项目状态显示不同的操作选项\n  if (status === 'exited' || status === 'partial') {\n    options.push({\n      label: '启动',\n      key: 'start',\n      icon: renderIcon(PlayOutline),\n    })\n  }\n\n  if (status === 'running' || status === 'partial') {\n    options.push(\n      {\n        label: '停止',\n        key: 'stop',\n        icon: renderIcon(StopOutline),\n      },\n      {\n        label: '重启',\n        key: 'restart',\n        icon: renderIcon(ReloadOutline),\n      },\n    )\n  }\n\n  options.push(\n    {\n      label: '重新部署',\n      key: 'deploy',\n      icon: renderIcon(RefreshOutline),\n    },\n    {\n      type: 'divider',\n      key: 'divider1',\n    },\n    {\n      label: '拉取镜像',\n      key: 'pull',\n      icon: renderIcon(CloudDownloadOutline),\n    },\n  )\n  if (status !== 'unknown') {\n    let label = '删除应用'\n    if (status === 'draft' || status === 'created_stack') {\n      label = '删除配置'\n    }\n    options.push(\n      {\n        type: 'divider',\n        key: 'divider2',\n      },\n      {\n        label: label,\n        key: 'delete',\n        icon: renderIcon(TrashOutline),\n        props: {\n          style: `color: ${theme.value.errorColor}`,\n        },\n      },\n    )\n  }\n  return options\n})\n\nconst handleMenuSelect = async (key: string) => {\n  if (!currentProject.value) {\n    return\n  }\n  switch (key) {\n    case 'deploy':\n      handleDeploy()\n      break\n    case 'start':\n      await handleComposeStart(currentProject.value)\n      await containerStore.fetchContainers(true, false)\n      break\n    case 'stop':\n      await handleComposeStop(currentProject.value)\n      await containerStore.fetchContainers(true, false)\n      break\n    case 'restart':\n      await handleComposeRestart(currentProject.value)\n      await containerStore.fetchContainers(true, false)\n      break\n    case 'delete':\n      handleComposeDelete(currentProject.value).then(() => {\n        handleBack()\n      })\n      break\n    case 'pull':\n      showPullLogs.value = true\n      break\n  }\n}\n// 计算属性\nconst currentProject = computed<ComposeProject | undefined>(() => {\n  return composeStore.projects.find((p) => p.name === projectName.value)\n})\n\nconst projectContainers = computed(() => {\n  return containerStore.getProjectContainers(projectName.value).value\n})\n\nconst isYamlModified = computed(() => {\n  return yamlContent.value !== originalYamlContent.value\n})\n\nconst tabTitleHeight = computed(() => {\n  return 42\n})\nconst yamlEditorOptHeight = computed(() => {\n  return 42\n})\n\nconst tabHeight = computed(() => {\n  return `calc(100vh - ${settingStore.contentSafeTop + tabTitleHeight.value + settingStore.contentSafeBottom}px)`\n})\n\nconst yamlEditorMinHeight = computed(() => {\n  return `${document.documentElement.clientHeight - settingStore.contentSafeTop - tabTitleHeight.value - yamlEditorOptHeight.value - settingStore.contentSafeBottom}px`\n})\n\nconst logsSocketUrl = computed(() => {\n  if (!currentProject.value) {\n    return undefined\n  }\n  const token = settingStore.getToken()\n  const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:'\n  const host = window.location.host\n  return `${protocol}//${host}/api/v1/compose/logs/${currentProject.value.name}/ws?token=${token}&composeFile=${encodeURIComponent(currentProject.value.composeFile)}&projectName=${encodeURIComponent(currentProject.value.name)}`\n})\n\n// 获取状态文本\nconst getStatusText = (status: string) => {\n  const statusMap: Record<string, string> = {\n    running: '运行中',\n    partial: '部分运行',\n    exited: '已停止',\n    paused: '暂停',\n    draft: '草稿',\n    created_stack: '创建中',\n    unknown: '未知',\n  }\n  return statusMap[status] || '未知'\n}\n\n// 加载项目数据\nconst loadProjectData = async () => {\n  try {\n    // 加载项目列表\n    await composeStore.fetchProjects(true)\n\n    // 加载容器列表\n    await containerStore.fetchContainers(true, false)\n\n    // 检查项目是否存在\n    if (!currentProject.value) {\n      message.error('项目不存在')\n      return\n    }\n  } catch (error) {\n    console.error('加载项目数据失败:', error)\n    message.error('加载项目数据失败')\n  }\n}\n\nconst Init = async () => {\n  loading.value = true\n  try {\n    await loadProjectData()\n  } catch (error) {\n    console.error('初始化失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 加载 YAML 内容\nconst loadYamlContent = async () => {\n  if (!currentProject.value) {\n    return\n  }\n\n  yamlLoading.value = true\n  try {\n    const content = await composeStore.getProjectYaml(\n      currentProject.value.name,\n      currentProject.value.composeFile,\n    )\n    yamlContent.value = content\n    originalYamlContent.value = content\n    handleYamlChange()\n  } catch (error) {\n    console.error('加载 YAML 内容失败:', error)\n  } finally {\n    yamlLoading.value = false\n  }\n}\n\n// YAML 变化时验证\nconst handleYamlChange = () => {\n  const result = validateComposeYaml(yamlContent.value)\n  isYamlValid.value = result.isValid\n  yamlValidationMessage.value = result.errorMessage\n}\n\n// 重新部署\nconst handleDeploy = () => {\n  const content = isYamlModified.value\n    ? '保存 YAML 配置后将重新创建并启动所有服务，这可能会导致服务短暂中断。是否继续？'\n    : '将重新创建并启动所有服务，这可能会导致服务短暂中断。是否继续？'\n\n  dialog.warning({\n    title: '确认重新部署',\n    content,\n    positiveText: '确认',\n    negativeText: '取消',\n    onPositiveClick: () => {\n      deployLoading.value = true\n      showProgress.value = true\n      createProgressRef.value?.start()\n    },\n  })\n}\n\n// 部署成功\nconst handleDeploySuccess = () => {\n  const msg = isYamlModified.value ? '保存并重新部署成功' : '重新部署成功'\n  message.success(msg)\n  originalYamlContent.value = yamlContent.value\n}\n\n// 部署失败\nconst handleDeployError = (errorMessage: string) => {\n  const prefix = isYamlModified.value ? '保存并重新部署' : '重新部署'\n  message.error(`${prefix}失败: ${errorMessage}`)\n  deployLoading.value = false\n}\n\n// 部署完成\nconst handleDeployComplete = () => {\n  deployLoading.value = false\n  // 延迟刷新数据\n  setTimeout(() => {\n    loadProjectData()\n  }, 1000)\n}\n\n// Tab 切换\nconst handleTabChange = (value: string) => {\n  activeTab.value = value\n\n  // 切换到 YAML tab 时加载内容\n  if (value === 'yaml' && !yamlContent.value) {\n    loadYamlContent()\n  }\n}\n\n// 容器操作\nconst handleStartContainer = async (container: ContainerStatus) => {\n  await handleStart(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleStopContainer = async (container: ContainerStatus) => {\n  await handleStop(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleRestartContainer = async (container: ContainerStatus) => {\n  await handleRestart(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleUpdateContainer = async (container: ContainerStatus) => {\n  await handleUpdate(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleDeleteContainer = async (container: ContainerStatus) => {\n  await handleDelete(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleExportContainer = async (container: ContainerStatus) => {\n  await handleExport(container)\n}\n\nconst handleViewContainerDetail = (container: ContainerStatus) => {\n  router.push({ name: 'container-detail', params: { id: container.id } })\n}\n\nconst handleViewContainerLogs = (container: ContainerStatus) => {\n  currentContainer.value = container\n  showContainerLogsModal.value = true\n}\n\n// 返回\nconst handleBack = () => {\n  router.push({ name: 'compose' })\n}\n\n// 监听项目名称变化\nwatch(\n  () => route.params.projectName,\n  (newName) => {\n    if (newName && typeof newName === 'string') {\n      projectName.value = newName\n      Init()\n    }\n  },\n)\n\n// 初始化\nonMounted(async () => {\n  Init()\n})\n</script>\n\n<style lang=\"less\">\n.layout-compose-detail {\n  .n-layout-scroll-container {\n    .n-layout-content {\n      padding-top: 0;\n    }\n  }\n}\n</style>\n\n<style scoped lang=\"less\">\n.page-header {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  gap: 16px;\n  .status-badge {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 0 10px;\n    height: 28px;\n    border-radius: 8px;\n    font-size: 13px;\n    line-height: 1.428;\n    letter-spacing: -0.01em;\n    box-shadow:\n      0px 1px 2px -1px rgba(0, 0, 0, 0.1),\n      0px 1px 3px 0px rgba(0, 0, 0, 0.1);\n\n    .status-dot {\n      width: 6px;\n      height: 6px;\n      border-radius: 50%;\n    }\n\n    &.status-running,\n    &.status-partial {\n      background: rgba(0, 188, 125, 0.1);\n      border: 1px solid rgba(0, 188, 125, 0.2);\n\n      .status-dot {\n        background: #00bc7d;\n        opacity: 0.5;\n      }\n\n      .status-text {\n        color: #00d492;\n      }\n    }\n\n    &.status-exited,\n    &.status-draft,\n    &.status-created_stack,\n    &.status-unknown {\n      background: rgba(98, 116, 142, 0.1);\n      border: 1px solid rgba(98, 116, 142, 0.2);\n\n      .status-dot {\n        background: #62748e;\n      }\n\n      .status-text {\n        color: #90a1b9;\n      }\n    }\n\n    &.status-paused {\n      background: rgba(254, 154, 0, 0.1);\n      border: 1px solid rgba(254, 154, 0, 0.2);\n\n      .status-dot {\n        background: #fe9a00;\n      }\n\n      .status-text {\n        color: #ffb900;\n      }\n    }\n  }\n}\n\n.compose-detail-page {\n  width: 100%;\n  height: 100%;\n\n  .empty-state {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 400px;\n  }\n  .compose-detail-pane {\n    padding-top: 4px;\n    .tab-content {\n      height: 100%;\n      .logs-stream-view {\n        padding-block: 0;\n        height: 100%;\n      }\n      .yaml-card {\n        border-radius: 8px;\n        height: 100%;\n      }\n    }\n  }\n  .empty-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 300px;\n  }\n\n  .containers-grid {\n    display: grid;\n    gap: 12px;\n\n    &.grid-cols-1 {\n      grid-template-columns: 1fr;\n    }\n\n    &.grid-cols-2 {\n      grid-template-columns: repeat(2, minmax(1fr, 50%));\n    }\n\n    &.grid-cols-3 {\n      grid-template-columns: repeat(3, minmax(1fr, 33.33%));\n    }\n\n    &.grid-cols-4 {\n      grid-template-columns: repeat(4, minmax(1fr, 25%));\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"compose-detail-page\">\n    <!-- 页面头部 -->\n    <Teleport to=\"#header\" defer>\n      <div class=\"page-header\">\n        <div class=\"flex items-center gap-3\">\n          <n-button text circle @click=\"handleBack\">\n            <template #icon>\n              <n-icon size=\"20\">\n                <ArrowBackOutline />\n              </n-icon>\n            </template>\n          </n-button>\n          <n-h2 class=\"m-0 text-lg\">{{ projectName }}</n-h2>\n          <div\n            v-if=\"currentProject\"\n            class=\"status-badge\"\n            :class=\"'status-' + currentProject.status\"\n          >\n            <span class=\"status-dot\"></span>\n            <span class=\"status-text\">{{ getStatusText(currentProject.status) }}</span>\n          </div>\n        </div>\n        <n-dropdown :options=\"dropdownOptions\" @select=\"handleMenuSelect\" trigger=\"click\">\n          <n-button text circle>\n            <template #icon>\n              <n-icon size=\"18\">\n                <EllipsisHorizontal />\n              </n-icon>\n            </template>\n          </n-button>\n        </n-dropdown>\n      </div>\n    </Teleport>\n\n    <!-- 加载状态 -->\n    <n-spin :show=\"loading\" class=\"h-[300px] flex items-center justify-center\" v-if=\"loading\">\n    </n-spin>\n    <template v-else>\n      <div v-if=\"!currentProject\" class=\"empty-state\">\n        <n-empty description=\"项目不存在\">\n          <template #extra>\n            <n-button @click=\"handleBack\">返回列表</n-button>\n          </template>\n        </n-empty>\n      </div>\n\n      <!-- Tabs 内容 -->\n      <n-tabs\n        v-else\n        type=\"line\"\n        animated\n        pane-class=\"compose-detail-pane\"\n        :pane-style=\"{ height: tabHeight }\"\n        :default-value=\"activeTab\"\n        @update:value=\"handleTabChange\"\n      >\n        <!-- Tab 1: 容器列表 -->\n        <n-tab-pane name=\"containers\" tab=\"容器\">\n          <template #tab>\n            <div class=\"flex items-center gap-2\">\n              <n-icon size=\"18\">\n                <LayersOutline />\n              </n-icon>\n              <span>容器</span>\n              <n-badge\n                v-if=\"projectContainers.length > 0\"\n                :value=\"projectContainers.length\"\n                :max=\"99\"\n                show-zero\n                type=\"info\"\n              />\n            </div>\n          </template>\n\n          <div class=\"tab-content\">\n            <div v-if=\"projectContainers.length === 0\" class=\"empty-container\">\n              <n-empty description=\"该项目下没有容器\" />\n            </div>\n            <div\n              v-else\n              class=\"containers-grid\"\n              :class=\"{\n                'grid-cols-1': isMobile,\n                'grid-cols-2': isTablet || isLaptop,\n                'grid-cols-3': isDesktop,\n                'grid-cols-4': isDesktopLarge,\n              }\"\n            >\n              <ContainerCard\n                v-for=\"container in projectContainers\"\n                :key=\"container.id\"\n                :container=\"container\"\n                @start=\"handleStartContainer(container)\"\n                @stop=\"handleStopContainer(container)\"\n                @restart=\"handleRestartContainer(container)\"\n                @update=\"handleUpdateContainer(container)\"\n                @delete=\"handleDeleteContainer(container)\"\n                @export=\"handleExportContainer(container)\"\n                @logs=\"handleViewContainerLogs(container)\"\n                @detail=\"handleViewContainerDetail(container)\"\n              />\n            </div>\n          </div>\n        </n-tab-pane>\n\n        <!-- Tab 2: YAML 编辑 -->\n        <n-tab-pane name=\"yaml\" tab=\"配置\">\n          <template #tab>\n            <div class=\"flex items-center gap-2\">\n              <n-icon size=\"18\">\n                <DocumentTextOutline />\n              </n-icon>\n              <span>配置</span>\n            </div>\n          </template>\n\n          <div class=\"tab-content yaml-tab\">\n            <n-spin :show=\"yamlLoading\" class=\"h-full\" v-if=\"yamlLoading\"> </n-spin>\n            <div v-else class=\"yaml-card\">\n              <div ref=\"yamlEditorContainerRef\" :style=\"{ height: 'calc(100% - 42px)' }\">\n                <YamlEditor\n                  v-model=\"yamlContent\"\n                  placeholder=\"请输入 docker-compose.yml 配置内容\"\n                  :min-height=\"yamlEditorMinHeight\"\n                  :max-height=\"yamlEditorMinHeight\"\n                  @change=\"handleYamlChange\"\n                />\n              </div>\n              <div class=\"flex justify-end gap-2 items-center px-2 h-[42px]\">\n                <n-text depth=\"3\" class=\"text-xs\" :style=\"{ color: theme.errorColor }\">\n                  {{ yamlValidationMessage }}\n                </n-text>\n                <n-button\n                  type=\"primary\"\n                  size=\"small\"\n                  :disabled=\"!isYamlValid || deployLoading\"\n                  :loading=\"deployLoading\"\n                  @click=\"handleDeploy\"\n                >\n                  <template #icon>\n                    <n-icon>\n                      <RefreshOutline />\n                    </n-icon>\n                  </template>\n                  {{ isYamlModified ? '保存并重新部署' : '重新部署' }}\n                </n-button>\n              </div>\n            </div>\n          </div>\n        </n-tab-pane>\n\n        <!-- Tab 3: 日志 -->\n        <n-tab-pane name=\"logs\" tab=\"日志\">\n          <template #tab>\n            <div class=\"flex items-center gap-2\">\n              <n-icon size=\"18\">\n                <DocumentIcon />\n              </n-icon>\n              <span>日志</span>\n            </div>\n          </template>\n\n          <div class=\"tab-content logs-tab\">\n            <LogsStreamView\n              class=\"logs-stream-view\"\n              v-if=\"activeTab === 'logs' && currentProject\"\n              :socket-url=\"logsSocketUrl\"\n              height=\"100%\"\n            />\n          </div>\n        </n-tab-pane>\n      </n-tabs>\n    </template>\n\n    <!-- 容器日志弹窗 -->\n    <ContainerLogsModal v-model:show=\"showContainerLogsModal\" :container=\"currentContainer\" />\n    <!-- 重新部署进度组件 -->\n    <ComposeCreateProgress\n      ref=\"createProgressRef\"\n      :show=\"showProgress\"\n      :project-name=\"projectName\"\n      :yaml-content=\"yamlContent\"\n      :force=\"true\"\n      @success=\"handleDeploySuccess\"\n      @error=\"handleDeployError\"\n      @complete=\"handleDeployComplete\"\n    />\n    <!-- Pull 日志弹窗 -->\n    <ComposePullLogsModal v-model:show=\"showPullLogs\" :project=\"currentProject || null\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useDialog, useMessage, useThemeVars, type DropdownOption } from 'naive-ui'\nimport {\n  ArrowBackOutline,\n  LayersOutline,\n  DocumentTextOutline,\n  RefreshOutline,\n  ReloadOutline,\n  TrashOutline,\n  PlayOutline,\n  StopOutline,\n  EllipsisHorizontal,\n  CloudDownloadOutline,\n} from '@vicons/ionicons5'\nimport DocumentIcon from '@/assets/svg/log.svg?component'\nimport { useComposeStore } from '@/store/compose'\nimport { useContainerStore } from '@/store/container'\nimport { useSettingStore } from '@/store/setting'\nimport { useResponsive } from '@/hooks/useResponsive'\nimport { useContainer } from '@/hooks/useContainer'\nimport type { ComposeProject, ContainerStatus } from '@/common/types'\nimport { renderIcon, validateComposeYaml } from '@/common/utils'\nimport ContainerCard from '@/components/ContainerCard.vue'\nimport ContainerLogsModal from '@/components/ContainerLogsModal.vue'\nimport LogsStreamView from '@/components/LogsStreamView.vue'\nimport YamlEditor from '@/components/YamlEditor/index.vue'\nimport ComposeCreateProgress from '@/components/ComposeCreateProgress.vue'\nimport ComposePullLogsModal from '@/components/ComposePullLogsModal.vue'\nimport { useCompose } from '@/hooks/useCompose'\n\nconst route = useRoute()\nconst router = useRouter()\nconst message = useMessage()\nconst dialog = useDialog()\nconst theme = useThemeVars()\nconst composeStore = useComposeStore()\nconst containerStore = useContainerStore()\nconst settingStore = useSettingStore()\nconst { isMobile, isTablet, isLaptop, isDesktop, isDesktopLarge } = useResponsive()\nconst { handleStart, handleStop, handleRestart, handleUpdate, handleDelete, handleExport } = useContainer()\nconst {\n  handleStart: handleComposeStart,\n  handleStop: handleComposeStop,\n  handleDelete: handleComposeDelete,\n  handleRestart: handleComposeRestart,\n} = useCompose()\n\n// 状态\nconst projectName = ref(route.params.projectName as string)\nconst activeTab = ref('containers')\nconst loading = ref(false)\nconst yamlLoading = ref(false)\nconst deployLoading = ref(false)\nconst yamlContent = ref('')\nconst originalYamlContent = ref('')\nconst yamlValidationMessage = ref('')\nconst isYamlValid = ref(true)\nconst showContainerLogsModal = ref(false)\nconst currentContainer = ref<ContainerStatus | null>(null)\nconst yamlEditorContainerRef = ref<HTMLElement | null>(null)\nconst createProgressRef = ref<InstanceType<typeof ComposeCreateProgress>>()\nconst showProgress = ref(false)\nconst showPullLogs = ref(false)\n\n// 下拉菜单选项\nconst dropdownOptions = computed<DropdownOption[]>(() => {\n  const options: DropdownOption[] = []\n  const status = currentProject.value?.status\n  // 根据项目状态显示不同的操作选项\n  if (status === 'exited' || status === 'partial') {\n    options.push({\n      label: '启动',\n      key: 'start',\n      icon: renderIcon(PlayOutline),\n    })\n  }\n\n  if (status === 'running' || status === 'partial') {\n    options.push(\n      {\n        label: '停止',\n        key: 'stop',\n        icon: renderIcon(StopOutline),\n      },\n      {\n        label: '重启',\n        key: 'restart',\n        icon: renderIcon(ReloadOutline),\n      },\n    )\n  }\n\n  options.push(\n    {\n      label: '重新部署',\n      key: 'deploy',\n      icon: renderIcon(RefreshOutline),\n    },\n    {\n      type: 'divider',\n      key: 'divider1',\n    },\n    {\n      label: '拉取镜像',\n      key: 'pull',\n      icon: renderIcon(CloudDownloadOutline),\n    },\n  )\n  if (status !== 'unknown') {\n    let label = '删除应用'\n    if (status === 'draft' || status === 'created_stack') {\n      label = '删除配置'\n    }\n    options.push(\n      {\n        type: 'divider',\n        key: 'divider2',\n      },\n      {\n        label: label,\n        key: 'delete',\n        icon: renderIcon(TrashOutline),\n        props: {\n          style: `color: ${theme.value.errorColor}`,\n        },\n      },\n    )\n  }\n  return options\n})\n\nconst handleMenuSelect = async (key: string) => {\n  if (!currentProject.value) {\n    return\n  }\n  switch (key) {\n    case 'deploy':\n      handleDeploy()\n      break\n    case 'start':\n      await handleComposeStart(currentProject.value)\n      await containerStore.fetchContainers(true, false)\n      break\n    case 'stop':\n      await handleComposeStop(currentProject.value)\n      await containerStore.fetchContainers(true, false)\n      break\n    case 'restart':\n      await handleComposeRestart(currentProject.value)\n      await containerStore.fetchContainers(true, false)\n      break\n    case 'delete':\n      handleComposeDelete(currentProject.value).then(() => {\n        handleBack()\n      })\n      break\n    case 'pull':\n      showPullLogs.value = true\n      break\n  }\n}\n// 计算属性\nconst currentProject = computed<ComposeProject | undefined>(() => {\n  return composeStore.projects.find((p) => p.name === projectName.value)\n})\n\nconst projectContainers = computed(() => {\n  return containerStore.getProjectContainers(projectName.value).value\n})\n\nconst isYamlModified = computed(() => {\n  return yamlContent.value !== originalYamlContent.value\n})\n\nconst tabTitleHeight = computed(() => {\n  return 42\n})\nconst yamlEditorOptHeight = computed(() => {\n  return 42\n})\n\nconst tabHeight = computed(() => {\n  return `calc(100vh - ${settingStore.contentSafeTop + tabTitleHeight.value + settingStore.contentSafeBottom}px)`\n})\n\nconst yamlEditorMinHeight = computed(() => {\n  return `${document.documentElement.clientHeight - settingStore.contentSafeTop - tabTitleHeight.value - yamlEditorOptHeight.value - settingStore.contentSafeBottom}px`\n})\n\nconst logsSocketUrl = computed(() => {\n  if (!currentProject.value) {\n    return undefined\n  }\n  const token = settingStore.getToken()\n  const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:'\n  const host = window.location.host\n  return `${protocol}//${host}/api/v1/compose/logs/${currentProject.value.name}/ws?token=${token}&composeFile=${encodeURIComponent(currentProject.value.composeFile)}&projectName=${encodeURIComponent(currentProject.value.name)}`\n})\n\n// 获取状态文本\nconst getStatusText = (status: string) => {\n  const statusMap: Record<string, string> = {\n    running: '运行中',\n    partial: '部分运行',\n    exited: '已停止',\n    paused: '暂停',\n    draft: '草稿',\n    created_stack: '创建中',\n    unknown: '未知',\n  }\n  return statusMap[status] || '未知'\n}\n\n// 加载项目数据\nconst loadProjectData = async () => {\n  try {\n    // 加载项目列表\n    await composeStore.fetchProjects(true)\n\n    // 加载容器列表\n    await containerStore.fetchContainers(true, false)\n\n    // 检查项目是否存在\n    if (!currentProject.value) {\n      message.error('项目不存在')\n      return\n    }\n  } catch (error) {\n    console.error('加载项目数据失败:', error)\n    message.error('加载项目数据失败')\n  }\n}\n\nconst Init = async () => {\n  loading.value = true\n  try {\n    await loadProjectData()\n  } catch (error) {\n    console.error('初始化失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 加载 YAML 内容\nconst loadYamlContent = async () => {\n  if (!currentProject.value) {\n    return\n  }\n\n  yamlLoading.value = true\n  try {\n    const content = await composeStore.getProjectYaml(\n      currentProject.value.name,\n      currentProject.value.composeFile,\n    )\n    yamlContent.value = content\n    originalYamlContent.value = content\n    handleYamlChange()\n  } catch (error) {\n    console.error('加载 YAML 内容失败:', error)\n  } finally {\n    yamlLoading.value = false\n  }\n}\n\n// YAML 变化时验证\nconst handleYamlChange = () => {\n  const result = validateComposeYaml(yamlContent.value)\n  isYamlValid.value = result.isValid\n  yamlValidationMessage.value = result.errorMessage\n}\n\n// 重新部署\nconst handleDeploy = () => {\n  const content = isYamlModified.value\n    ? '保存 YAML 配置后将重新创建并启动所有服务，这可能会导致服务短暂中断。是否继续？'\n    : '将重新创建并启动所有服务，这可能会导致服务短暂中断。是否继续？'\n\n  dialog.warning({\n    title: '确认重新部署',\n    content,\n    positiveText: '确认',\n    negativeText: '取消',\n    onPositiveClick: () => {\n      deployLoading.value = true\n      showProgress.value = true\n      createProgressRef.value?.start()\n    },\n  })\n}\n\n// 部署成功\nconst handleDeploySuccess = () => {\n  const msg = isYamlModified.value ? '保存并重新部署成功' : '重新部署成功'\n  message.success(msg)\n  originalYamlContent.value = yamlContent.value\n}\n\n// 部署失败\nconst handleDeployError = (errorMessage: string) => {\n  const prefix = isYamlModified.value ? '保存并重新部署' : '重新部署'\n  message.error(`${prefix}失败: ${errorMessage}`)\n  deployLoading.value = false\n}\n\n// 部署完成\nconst handleDeployComplete = () => {\n  deployLoading.value = false\n  // 延迟刷新数据\n  setTimeout(() => {\n    loadProjectData()\n  }, 1000)\n}\n\n// Tab 切换\nconst handleTabChange = (value: string) => {\n  activeTab.value = value\n\n  // 切换到 YAML tab 时加载内容\n  if (value === 'yaml' && !yamlContent.value) {\n    loadYamlContent()\n  }\n}\n\n// 容器操作\nconst handleStartContainer = async (container: ContainerStatus) => {\n  await handleStart(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleStopContainer = async (container: ContainerStatus) => {\n  await handleStop(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleRestartContainer = async (container: ContainerStatus) => {\n  await handleRestart(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleUpdateContainer = async (container: ContainerStatus) => {\n  await handleUpdate(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleDeleteContainer = async (container: ContainerStatus) => {\n  await handleDelete(container)\n  await Promise.all([containerStore.fetchContainers(true, false), loadProjectData()])\n}\n\nconst handleExportContainer = async (container: ContainerStatus) => {\n  await handleExport(container)\n}\n\nconst handleViewContainerDetail = (container: ContainerStatus) => {\n  router.push({ name: 'container-detail', params: { id: container.id } })\n}\n\nconst handleViewContainerLogs = (container: ContainerStatus) => {\n  currentContainer.value = container\n  showContainerLogsModal.value = true\n}\n\n// 返回\nconst handleBack = () => {\n  router.push({ name: 'compose' })\n}\n\n// 监听项目名称变化\nwatch(\n  () => route.params.projectName,\n  (newName) => {\n    if (newName && typeof newName === 'string') {\n      projectName.value = newName\n      Init()\n    }\n  },\n)\n\n// 初始化\nonMounted(async () => {\n  Init()\n})\n</script>\n\n<style lang=\"less\">\n.layout-compose-detail {\n  .n-layout-scroll-container {\n    .n-layout-content {\n      padding-top: 0;\n    }\n  }\n}\n</style>\n\n<style scoped lang=\"less\">\n.page-header {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  gap: 16px;\n  .status-badge {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 0 10px;\n    height: 28px;\n    border-radius: 8px;\n    font-size: 13px;\n    line-height: 1.428;\n    letter-spacing: -0.01em;\n    box-shadow:\n      0px 1px 2px -1px rgba(0, 0, 0, 0.1),\n      0px 1px 3px 0px rgba(0, 0, 0, 0.1);\n\n    .status-dot {\n      width: 6px;\n      height: 6px;\n      border-radius: 50%;\n    }\n\n    &.status-running,\n    &.status-partial {\n      background: rgba(0, 188, 125, 0.1);\n      border: 1px solid rgba(0, 188, 125, 0.2);\n\n      .status-dot {\n        background: #00bc7d;\n        opacity: 0.5;\n      }\n\n      .status-text {\n        color: #00d492;\n      }\n    }\n\n    &.status-exited,\n    &.status-draft,\n    &.status-created_stack,\n    &.status-unknown {\n      background: rgba(98, 116, 142, 0.1);\n      border: 1px solid rgba(98, 116, 142, 0.2);\n\n      .status-dot {\n        background: #62748e;\n      }\n\n      .status-text {\n        color: #90a1b9;\n      }\n    }\n\n    &.status-paused {\n      background: rgba(254, 154, 0, 0.1);\n      border: 1px solid rgba(254, 154, 0, 0.2);\n\n      .status-dot {\n        background: #fe9a00;\n      }\n\n      .status-text {\n        color: #ffb900;\n      }\n    }\n  }\n}\n\n.compose-detail-page {\n  width: 100%;\n  height: 100%;\n\n  .empty-state {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 400px;\n  }\n  .compose-detail-pane {\n    padding-top: 4px;\n    .tab-content {\n      height: 100%;\n      .logs-stream-view {\n        padding-block: 0;\n        height: 100%;\n      }\n      .yaml-card {\n        border-radius: 8px;\n        height: 100%;\n      }\n    }\n  }\n  .empty-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 300px;\n  }\n\n  .containers-grid {\n    display: grid;\n    gap: 12px;\n\n    &.grid-cols-1 {\n      grid-template-columns: 1fr;\n    }\n\n    &.grid-cols-2 {\n      grid-template-columns: repeat(2, minmax(1fr, 50%));\n    }\n\n    &.grid-cols-3 {\n      grid-template-columns: repeat(3, minmax(1fr, 33.33%));\n    }\n\n    &.grid-cols-4 {\n      grid-template-columns: repeat(4, minmax(1fr, 25%));\n    }\n  }\n}\n</style>\n"],"mappings":"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"}