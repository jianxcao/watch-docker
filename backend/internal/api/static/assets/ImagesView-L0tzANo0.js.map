{"version":3,"file":"ImagesView-L0tzANo0.js","names":["_hoisted_1","render","_openBlock","_createElementBlock","_createElementVNode","title: string","contentText: string","error: any","_hoisted_1","render","_openBlock","_createElementBlock","_createElementVNode","_hoisted_1","render","_openBlock","_createElementBlock","_createElementVNode","_hoisted_1","_openBlock","_createElementBlock","_createElementVNode"],"sources":["../../node_modules/.pnpm/@vicons+ionicons5@0.13.0/node_modules/@vicons/ionicons5/es/ResizeOutline.js","../../src/hooks/useImage.ts","../../src/assets/svg/tag.svg?component","../../src/assets/svg/size.svg?component","../../src/assets/svg/calendar.svg?component","../../src/components/ImageCard.vue","../../src/components/ImageCard.vue","../../src/components/ImageImportModal.vue","../../src/components/ImageImportModal.vue","../../src/pages/ImagesView.vue","../../src/pages/ImagesView.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'ResizeOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32',\n                d: 'M304 96h112v112'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32',\n                d: 'M405.77 106.2L111.98 400.02'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32',\n                d: 'M208 416H96V304'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { useImageStore } from '@/store/image'\nimport { useContainerStore } from '@/store/container'\nimport { useMessage, useDialog } from 'naive-ui'\nimport { h, ref } from 'vue'\nimport { NCheckbox, NSpace, NText } from 'naive-ui'\nimport type { ImageInfo, ContainerStatus } from '@/common/types'\n\nexport function useImage() {\n  const store = useImageStore()\n  const containerStore = useContainerStore()\n  const message = useMessage()\n  const dialog = useDialog()\n\n  // 删除镜像（带确认）\n  const handleDelete = (image: ImageInfo) => {\n    const displayTag = store.getImageDisplayTag(image)\n    const isDangling = store.isDanglingImage(image)\n    const isInUse = isImageInUse(image)\n    const usingContainers = getContainersUsingImage(image)\n\n    // 创建响应式的强制删除选项，如果镜像正在被使用则默认选中\n    const forceDeleteRef = ref(isInUse)\n\n    let title: string\n    let contentText: string\n\n    if (isDangling) {\n      title = '确认删除悬空镜像'\n      contentText = `确定要删除悬空镜像 \"${displayTag}\" 吗？`\n    } else {\n      title = '确认删除镜像'\n      if (isInUse) {\n        const containerList = usingContainers.map((c) => `• ${c.name}`).join('\\n')\n        contentText = `镜像 \"${displayTag}\" 正在被以下容器使用：\\n\\n${containerList}\\n\\n删除此镜像可能会影响这些容器的运行。`\n      } else {\n        contentText = `确定要删除镜像 \"${displayTag}\" 吗？`\n      }\n    }\n\n    // 创建自定义对话框内容\n    const content = () =>\n      h(NSpace, { vertical: true }, () =>\n        [\n          h(NText, {}, () => contentText),\n          // 只有在非悬空镜像时才显示强制删除选项\n          !isDangling &&\n            h(\n              NCheckbox,\n              {\n                checked: forceDeleteRef.value,\n                'onUpdate:checked': (checked: boolean) => {\n                  forceDeleteRef.value = checked\n                },\n              },\n              () => '强制删除'\n            ),\n        ].filter(Boolean)\n      )\n\n    const d = dialog.warning({\n      title,\n      content,\n      positiveText: '确认删除',\n      negativeText: '取消',\n      onPositiveClick: async () => {\n        try {\n          d.loading = true\n          const shouldForce = isDangling ? false : forceDeleteRef.value\n          await store.deleteImage(image.id, shouldForce)\n          message.success(`镜像 ${displayTag} 删除成功`)\n          d.loading = false\n        } catch (error: any) {\n          d.loading = false\n          message.error(`删除镜像失败: ${error.message}`)\n        }\n      },\n    })\n  }\n\n  // 批量删除悬空镜像\n  const handleDeleteDangling = () => {\n    const danglingImages = store.danglingImages\n\n    if (danglingImages.length === 0) {\n      message.info('当前没有悬空镜像')\n      return\n    }\n\n    dialog.warning({\n      title: '批量删除悬空镜像',\n      content: `发现 ${danglingImages.length} 个悬空镜像，确定要全部删除吗？`,\n      positiveText: '确认删除',\n      negativeText: '取消',\n      onPositiveClick: async () => {\n        let successCount = 0\n        let failCount = 0\n\n        for (const image of danglingImages) {\n          try {\n            await store.deleteImage(image.id, false)\n            successCount++\n          } catch (error) {\n            failCount++\n            console.error(`删除悬空镜像 ${image.id} 失败:`, error)\n          }\n        }\n\n        if (successCount > 0) {\n          message.success(`成功删除 ${successCount} 个悬空镜像`)\n        }\n\n        if (failCount > 0) {\n          message.warning(`${failCount} 个悬空镜像删除失败`)\n        }\n      },\n    })\n  }\n\n  // 刷新镜像列表\n  const handleRefresh = async () => {\n    try {\n      await store.fetchImages()\n      message.success('镜像列表刷新成功')\n    } catch (error: any) {\n      message.error(`刷新失败: ${error.message}`)\n    }\n  }\n\n  // 下载镜像\n  const handleDownload = async (image: ImageInfo) => {\n    const displayName = getImageNameOnly(image)\n\n    try {\n      await store.downloadImage(image.id)\n      message.success(`镜像 ${displayName} 下载成功`)\n    } catch (error: any) {\n      message.error(`下载镜像失败: ${error.message}`)\n    }\n  }\n\n  // 导入镜像\n  const handleImport = async (file: File) => {\n    try {\n      await store.importImage(file)\n      message.success(`镜像 ${file.name} 导入成功`)\n    } catch (error: any) {\n      message.error(`导入镜像失败: ${error.message}`)\n    }\n  }\n\n  // 格式化创建时间\n  const formatCreateTime = (timestamp: number): string => {\n    const date = new Date(timestamp * 1000)\n    return date.toLocaleString('zh-CN', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n    })\n  }\n\n  // 获取镜像年龄（多久前创建）\n  const getImageAge = (timestamp: number): string => {\n    const now = Date.now()\n    const createTime = timestamp * 1000\n    const diff = now - createTime\n\n    const seconds = Math.floor(diff / 1000)\n    const minutes = Math.floor(seconds / 60)\n    const hours = Math.floor(minutes / 60)\n    const days = Math.floor(hours / 24)\n    const months = Math.floor(days / 30)\n    const years = Math.floor(days / 365)\n\n    if (years > 0) {return `${years}年前`}\n    if (months > 0) {return `${months}个月前`}\n    if (days > 0) {return `${days}天前`}\n    if (hours > 0) {return `${hours}小时前`}\n    if (minutes > 0) {return `${minutes}分钟前`}\n    return '刚刚'\n  }\n\n  // 获取镜像版本的显示文本\n  const getVersionDisplayText = (image: ImageInfo): string => {\n    if (!image.repoTags || image.repoTags.length === 0) {\n      return '<none>'\n    }\n\n    const validTags = image.repoTags.filter((tag) => tag !== '<none>:<none>')\n    if (validTags.length === 0) {\n      return '<none>'\n    }\n\n    // 从第一个有效标签中提取版本\n    const firstTag = validTags[0]\n    const colonIndex = firstTag.lastIndexOf(':')\n\n    if (colonIndex === -1) {\n      // 如果没有冒号，返回 latest\n      return 'latest'\n    }\n\n    const version = firstTag.substring(colonIndex + 1)\n\n    // 如果版本为空或者是 latest，返回 latest\n    if (!version || version === 'latest') {\n      return 'latest'\n    }\n\n    // 如果有多个标签，显示版本数量\n    if (validTags.length > 1) {\n      return `${version} +${validTags.length - 1}`\n    }\n\n    return version\n  }\n\n  // 获取镜像名称（不包含版本）\n  const getImageNameOnly = (image: ImageInfo): string => {\n    if (!image.repoTags || image.repoTags.length === 0) {\n      // 如果没有标签，返回短ID\n      return image.id.startsWith('sha256:') ? image.id.slice(7, 19) : image.id.slice(0, 12)\n    }\n\n    const validTags = image.repoTags.filter((tag) => tag !== '<none>:<none>')\n    if (validTags.length === 0) {\n      // 如果没有有效标签，返回短ID\n      return image.id.startsWith('sha256:') ? image.id.slice(7, 19) : image.id.slice(0, 12)\n    }\n\n    // 从第一个有效标签中提取镜像名称（冒号前面的部分）\n    const firstTag = validTags[0]\n    const colonIndex = firstTag.lastIndexOf(':')\n\n    if (colonIndex === -1) {\n      // 如果没有冒号，整个标签就是镜像名称\n      return firstTag\n    }\n\n    return firstTag.substring(0, colonIndex)\n  }\n\n  // 获取镜像摘要的显示文本\n  const getDigestDisplayText = (image: ImageInfo): string => {\n    if (!image.repoDigests || image.repoDigests.length === 0) {\n      return image.id.startsWith('sha256:') ? image.id.slice(7, 19) : image.id.slice(0, 12)\n    }\n\n    const digest = image.repoDigests[0]\n    const parts = digest.split('@')\n    if (parts.length === 2 && parts[1].startsWith('sha256:')) {\n      return parts[1].slice(7, 19)\n    }\n\n    return image.id.slice(0, 12)\n  }\n\n  // 检查镜像是否被容器使用\n  const isImageInUse = (image: ImageInfo): boolean => {\n    return getContainersUsingImage(image).length > 0\n  }\n\n  // 获取使用指定镜像的容器列表\n  const getContainersUsingImage = (image: ImageInfo): ContainerStatus[] => {\n    const containers = containerStore.containers\n    const imageTags = image.repoTags || []\n\n    return containers.filter((container) => {\n      // 检查容器的 image 字段是否匹配镜像的标签\n      const containerImage = container.image\n\n      // 如果容器镜像与镜像标签完全匹配\n      if (imageTags.includes(containerImage)) {\n        return true\n      }\n\n      // 检查容器镜像是否与镜像ID相关（通过标签部分匹配）\n      if (\n        imageTags.some((tag) => {\n          // 处理带有digest的情况（例如: nginx@sha256:xxx）\n          const tagWithoutDigest = tag.split('@')[0]\n          const containerImageWithoutDigest = containerImage.split('@')[0]\n\n          // 处理带有tag的情况（例如: nginx:latest）\n          const tagWithoutTag = tagWithoutDigest.split(':')[0]\n          const containerImageWithoutTag = containerImageWithoutDigest.split(':')[0]\n\n          return (\n            tagWithoutDigest === containerImageWithoutDigest ||\n            tagWithoutTag === containerImageWithoutTag\n          )\n        })\n      ) {\n        return true\n      }\n\n      return false\n    })\n  }\n\n  // 获取镜像使用情况的显示文本\n  const getImageUsageText = (image: ImageInfo): string => {\n    const usingContainers = getContainersUsingImage(image)\n\n    if (usingContainers.length === 0) {\n      return '未使用'\n    }\n\n    if (usingContainers.length === 1) {\n      return `被 ${usingContainers[0].name} 使用`\n    }\n\n    return `被 ${usingContainers.length} 个容器使用`\n  }\n\n  // 获取使用镜像的容器名称列表\n  const getImageUsageContainers = (image: ImageInfo): string[] => {\n    const usingContainers = getContainersUsingImage(image)\n    return usingContainers.map((container) => container.name)\n  }\n\n  return {\n    // 操作方法\n    handleDelete,\n    handleDeleteDangling,\n    handleRefresh,\n    handleDownload,\n    handleImport,\n\n    // 工具方法\n    formatCreateTime,\n    getImageAge,\n    getVersionDisplayText,\n    getImageNameOnly,\n    getDigestDisplayText,\n\n    // 镜像使用情况相关方法\n    isImageInUse,\n    getContainersUsingImage,\n    getImageUsageText,\n    getImageUsageContainers,\n  }\n}\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"currentColor\"\n}\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [...(_cache[0] || (_cache[0] = [\n    _createElementVNode(\"path\", { d: \"M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7c0 .55.22 1.05.59 1.41l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42\" }, null, -1)\n  ]))]))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"currentColor\"\n}\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [...(_cache[0] || (_cache[0] = [\n    _createElementVNode(\"path\", { d: \"M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8m0 2a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6\" }, null, -1)\n  ]))]))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"currentColor\"\n}\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [...(_cache[0] || (_cache[0] = [\n    _createElementVNode(\"path\", { d: \"M19 3h-1V1h-2v2H8V1H6v2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H5V8h14z\" }, null, -1)\n  ]))]))\n}\nexport default { render: render }","<template>\n  <div class=\"image-card\">\n    <!-- 头部：镜像名称和状态 -->\n    <div class=\"card-header\">\n      <div class=\"image-name\">\n        {{ imageHooks.getImageNameOnly(image) }}\n      </div>\n      <div class=\"status-tags\">\n        <n-tag\n          v-if=\"imageHooks.isImageInUse(image)\"\n          :bordered=\"false\"\n          round\n          type=\"success\"\n          size=\"small\"\n        >\n          使用中\n        </n-tag>\n      </div>\n    </div>\n\n    <!-- 版本信息 -->\n    <div class=\"tag-section\">\n      <n-icon class=\"tag-icon\">\n        <TagIcon />\n      </n-icon>\n      <span class=\"tag-text\">{{ imageHooks.getVersionDisplayText(image) }}</span>\n    </div>\n\n    <!-- 信息列表 -->\n    <div class=\"info-list\">\n      <div class=\"info-item\">\n        <span class=\"info-label\">ID</span>\n        <span class=\"info-value\">{{ imageStore.getDisplayId(image) }}</span>\n      </div>\n\n      <div class=\"info-item\">\n        <n-icon class=\"info-icon\">\n          <SizeIcon />\n        </n-icon>\n        <span class=\"info-label\">大小</span>\n        <span class=\"info-value\">{{ formatBytes(image.size) }}</span>\n      </div>\n\n      <div class=\"info-item\">\n        <n-icon class=\"info-icon\">\n          <CalendarIcon />\n        </n-icon>\n        <span class=\"info-label\">创建时间</span>\n        <span class=\"info-value\">{{ imageHooks.formatCreateTime(image.created) }}</span>\n      </div>\n    </div>\n\n    <!-- 操作按钮 -->\n    <div class=\"card-footer\">\n      <n-button\n        @click=\"() => handleDownload()\"\n        ghost\n        size=\"small\"\n        class=\"download-btn\"\n        :loading=\"imageStore.isImageDownloading(image.id)\"\n      >\n        <template #icon>\n          <n-icon>\n            <DownloadOutline />\n          </n-icon>\n        </template>\n        下载\n      </n-button>\n      <n-button\n        @click=\"() => handleDelete()\"\n        type=\"error\"\n        ghost\n        size=\"small\"\n        class=\"delete-btn\"\n        :loading=\"imageStore.isImageDeleting(image.id)\"\n      >\n        <template #icon>\n          <n-icon>\n            <TrashOutline />\n          </n-icon>\n        </template>\n        删除\n      </n-button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useImageStore } from '@/store/image'\nimport { useImage } from '@/hooks/useImage'\nimport type { ImageInfo } from '@/common/types'\nimport { TrashOutline, DownloadOutline } from '@vicons/ionicons5'\nimport { formatBytes } from '@/common/utils'\n\n// 导入 SVG 图标\nimport TagIcon from '@/assets/svg/tag.svg?component'\nimport SizeIcon from '@/assets/svg/size.svg?component'\nimport CalendarIcon from '@/assets/svg/calendar.svg?component'\n// Props\ninterface Props {\n  image: ImageInfo\n}\n\nconst props = defineProps<Props>()\n\n// Emits\nconst emit = defineEmits<{\n  delete: [image: ImageInfo, force?: boolean]\n}>()\n\n// Store & Hooks\nconst imageStore = useImageStore()\nconst imageHooks = useImage()\n\n// 下载处理函数\nconst handleDownload = async () => {\n  await imageHooks.handleDownload(props.image)\n}\n\n// 删除处理函数\nconst handleDelete = () => {\n  emit('delete', props.image)\n}\n</script>\n\n<style scoped lang=\"less\">\n.image-card {\n  background: var(--card-color);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  padding: 16px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  color: var(--text-color-1);\n  box-shadow: var(--box-shadow-1);\n\n  &:hover {\n    transform: translateY(-2px);\n    background: linear-gradient(\n      135deg,\n      var(--card-color) 0%,\n      color-mix(in srgb, var(--card-color) 10%, transparent) 100%\n    );\n    border-color: color-mix(in srgb, var(--border-color) 90%, var(--text-color-3) 100%);\n  }\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background: linear-gradient(\n      90deg,\n      transparent 0%,\n      var(--text-color-disabled) 50%,\n      transparent 100%\n    );\n  }\n\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 1px;\n\n    .image-name {\n      font-size: 16px;\n      font-weight: 600;\n      color: var(--text-base);\n      line-height: 1.3;\n      flex: 1;\n      margin-right: 8px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n\n  .tag-section {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    margin-bottom: 16px;\n\n    .tag-text {\n      color: var(--text-color-3);\n    }\n\n    .tag-icon {\n      color: var(--text-color-3);\n      flex-shrink: 0;\n    }\n  }\n\n  .info-list {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    margin-bottom: 8px;\n\n    .info-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 2px 0;\n\n      .info-icon {\n        color: var(--text-color-3);\n        flex-shrink: 0;\n      }\n\n      .info-label {\n        color: var(--text-color-3);\n        min-width: 60px;\n        flex-shrink: 0;\n      }\n\n      .info-value {\n        color: var(--text-color-2);\n        font-weight: 500;\n        flex: 1;\n        text-align: right;\n      }\n    }\n  }\n\n  .card-footer {\n    margin-top: 16px;\n    padding-top: 12px;\n    border-top: 1px solid var(--divider-color);\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n\n    .download-btn {\n      flex-shrink: 0;\n    }\n\n    .delete-btn {\n      flex-shrink: 0;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"image-card\">\n    <!-- 头部：镜像名称和状态 -->\n    <div class=\"card-header\">\n      <div class=\"image-name\">\n        {{ imageHooks.getImageNameOnly(image) }}\n      </div>\n      <div class=\"status-tags\">\n        <n-tag\n          v-if=\"imageHooks.isImageInUse(image)\"\n          :bordered=\"false\"\n          round\n          type=\"success\"\n          size=\"small\"\n        >\n          使用中\n        </n-tag>\n      </div>\n    </div>\n\n    <!-- 版本信息 -->\n    <div class=\"tag-section\">\n      <n-icon class=\"tag-icon\">\n        <TagIcon />\n      </n-icon>\n      <span class=\"tag-text\">{{ imageHooks.getVersionDisplayText(image) }}</span>\n    </div>\n\n    <!-- 信息列表 -->\n    <div class=\"info-list\">\n      <div class=\"info-item\">\n        <span class=\"info-label\">ID</span>\n        <span class=\"info-value\">{{ imageStore.getDisplayId(image) }}</span>\n      </div>\n\n      <div class=\"info-item\">\n        <n-icon class=\"info-icon\">\n          <SizeIcon />\n        </n-icon>\n        <span class=\"info-label\">大小</span>\n        <span class=\"info-value\">{{ formatBytes(image.size) }}</span>\n      </div>\n\n      <div class=\"info-item\">\n        <n-icon class=\"info-icon\">\n          <CalendarIcon />\n        </n-icon>\n        <span class=\"info-label\">创建时间</span>\n        <span class=\"info-value\">{{ imageHooks.formatCreateTime(image.created) }}</span>\n      </div>\n    </div>\n\n    <!-- 操作按钮 -->\n    <div class=\"card-footer\">\n      <n-button\n        @click=\"() => handleDownload()\"\n        ghost\n        size=\"small\"\n        class=\"download-btn\"\n        :loading=\"imageStore.isImageDownloading(image.id)\"\n      >\n        <template #icon>\n          <n-icon>\n            <DownloadOutline />\n          </n-icon>\n        </template>\n        下载\n      </n-button>\n      <n-button\n        @click=\"() => handleDelete()\"\n        type=\"error\"\n        ghost\n        size=\"small\"\n        class=\"delete-btn\"\n        :loading=\"imageStore.isImageDeleting(image.id)\"\n      >\n        <template #icon>\n          <n-icon>\n            <TrashOutline />\n          </n-icon>\n        </template>\n        删除\n      </n-button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useImageStore } from '@/store/image'\nimport { useImage } from '@/hooks/useImage'\nimport type { ImageInfo } from '@/common/types'\nimport { TrashOutline, DownloadOutline } from '@vicons/ionicons5'\nimport { formatBytes } from '@/common/utils'\n\n// 导入 SVG 图标\nimport TagIcon from '@/assets/svg/tag.svg?component'\nimport SizeIcon from '@/assets/svg/size.svg?component'\nimport CalendarIcon from '@/assets/svg/calendar.svg?component'\n// Props\ninterface Props {\n  image: ImageInfo\n}\n\nconst props = defineProps<Props>()\n\n// Emits\nconst emit = defineEmits<{\n  delete: [image: ImageInfo, force?: boolean]\n}>()\n\n// Store & Hooks\nconst imageStore = useImageStore()\nconst imageHooks = useImage()\n\n// 下载处理函数\nconst handleDownload = async () => {\n  await imageHooks.handleDownload(props.image)\n}\n\n// 删除处理函数\nconst handleDelete = () => {\n  emit('delete', props.image)\n}\n</script>\n\n<style scoped lang=\"less\">\n.image-card {\n  background: var(--card-color);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  padding: 16px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  color: var(--text-color-1);\n  box-shadow: var(--box-shadow-1);\n\n  &:hover {\n    transform: translateY(-2px);\n    background: linear-gradient(\n      135deg,\n      var(--card-color) 0%,\n      color-mix(in srgb, var(--card-color) 10%, transparent) 100%\n    );\n    border-color: color-mix(in srgb, var(--border-color) 90%, var(--text-color-3) 100%);\n  }\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background: linear-gradient(\n      90deg,\n      transparent 0%,\n      var(--text-color-disabled) 50%,\n      transparent 100%\n    );\n  }\n\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 1px;\n\n    .image-name {\n      font-size: 16px;\n      font-weight: 600;\n      color: var(--text-base);\n      line-height: 1.3;\n      flex: 1;\n      margin-right: 8px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n\n  .tag-section {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    margin-bottom: 16px;\n\n    .tag-text {\n      color: var(--text-color-3);\n    }\n\n    .tag-icon {\n      color: var(--text-color-3);\n      flex-shrink: 0;\n    }\n  }\n\n  .info-list {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    margin-bottom: 8px;\n\n    .info-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 2px 0;\n\n      .info-icon {\n        color: var(--text-color-3);\n        flex-shrink: 0;\n      }\n\n      .info-label {\n        color: var(--text-color-3);\n        min-width: 60px;\n        flex-shrink: 0;\n      }\n\n      .info-value {\n        color: var(--text-color-2);\n        font-weight: 500;\n        flex: 1;\n        text-align: right;\n      }\n    }\n  }\n\n  .card-footer {\n    margin-top: 16px;\n    padding-top: 12px;\n    border-top: 1px solid var(--divider-color);\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n\n    .download-btn {\n      flex-shrink: 0;\n    }\n\n    .delete-btn {\n      flex-shrink: 0;\n    }\n  }\n}\n</style>\n","<template>\n  <n-modal\n    v-model:show=\"showModal\"\n    :icon=\"getIcon()\"\n    preset=\"dialog\"\n    style=\"padding: 12px; width: 90vw; max-width: 600px\"\n  >\n    <template #header>\n      <span>导入镜像</span>\n    </template>\n    <div class=\"import-content\">\n      <n-upload\n        ref=\"uploadRef\"\n        :max=\"1\"\n        :file-list=\"fileList\"\n        :custom-request=\"handleCustomRequest\"\n        accept=\".tar\"\n        :show-file-list=\"false\"\n        directory-dnd\n        @update:file-list=\"handleFileListUpdate\"\n        @before-upload=\"handleBeforeUpload\"\n      >\n        <n-upload-dragger>\n          <div class=\"upload-area\">\n            <n-icon size=\"48\" :depth=\"3\">\n              <CloudUploadOutline />\n            </n-icon>\n            <n-text class=\"upload-title\"> 点击或者拖动文件到该区域来上传 </n-text>\n            <n-p depth=\"3\" class=\"upload-hint\"> 仅支持 .tar 格式的 Docker 镜像文件 </n-p>\n          </div>\n        </n-upload-dragger>\n      </n-upload>\n\n      <!-- 上传进度 -->\n      <div v-if=\"uploading\" class=\"upload-progress\">\n        <n-space vertical>\n          <div class=\"progress-info\">\n            <n-text>{{ currentFileName }}</n-text>\n            <n-text depth=\"3\"\n              >{{ formatFileSize(uploadedSize) }} / {{ formatFileSize(totalSize) }}</n-text\n            >\n          </div>\n          <n-progress\n            type=\"line\"\n            :percentage=\"uploadProgress\"\n            :show-indicator=\"false\"\n            :height=\"8\"\n          />\n          <div class=\"progress-details\">\n            <n-text depth=\"3\">{{ uploadProgress.toFixed(1) }}% - {{ uploadSpeed }}</n-text>\n          </div>\n        </n-space>\n      </div>\n    </div>\n    <template #action>\n      <n-space justify=\"end\">\n        <n-button @click=\"handleCancel\" :disabled=\"uploading\">\n          {{ uploading ? '上传中...' : '取消' }}\n        </n-button>\n      </n-space>\n    </template>\n  </n-modal>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport {\n  useMessage,\n  useThemeVars,\n  type UploadCustomRequestOptions,\n  type UploadFileInfo,\n} from 'naive-ui'\nimport { CloudUploadOutline } from '@vicons/ionicons5'\nimport { renderIcon } from '@/common/utils'\nimport { useXhrUpload } from '@/hooks/useXhrUpload'\nimport { useSettingStore } from '@/store/setting'\n\nconst theme = useThemeVars()\nconst settingStore = useSettingStore()\n\nconst getIcon = () => {\n  return renderIcon(CloudUploadOutline, {\n    color: theme.value.primaryColor,\n    size: 20,\n  })\n}\n\ninterface Emits {\n  (e: 'success'): void\n}\n\nconst showModal = defineModel<boolean>('show')\nconst emit = defineEmits<Emits>()\nconst message = useMessage()\nconst uploadRef = ref()\nconst fileList = ref<UploadFileInfo[]>([])\n\n// 使用上传hooks\nconst {\n  uploading,\n  uploadProgress,\n  uploadedSize,\n  totalSize,\n  currentFileName,\n  uploadSpeed,\n  resetState,\n  upload,\n  formatFileSize,\n} = useXhrUpload()\n\n// 监听弹窗显示状态\nwatch(showModal, (show) => {\n  if (show) {\n    fileList.value = []\n    resetState()\n  }\n})\n\n// 文件列表更新\nconst handleFileListUpdate = (files: UploadFileInfo[]) => {\n  fileList.value = files\n}\n\n// 上传前验证\nconst handleBeforeUpload = (data: { file: UploadFileInfo }) => {\n  const { file } = data\n\n  // 验证文件类型\n  if (!file.name?.endsWith('.tar')) {\n    message.error('请选择 .tar 格式的镜像文件')\n    return false\n  }\n\n  // 验证文件大小（可选，比如限制最大5GB）\n  const maxSize = 5 * 1024 * 1024 * 1024 // 5GB\n  if (file.file && file.file.size > maxSize) {\n    message.error('文件大小不能超过 5GB')\n    return false\n  }\n\n  return true\n}\n\n// 自定义上传处理\nconst handleCustomRequest = async (options: UploadCustomRequestOptions) => {\n  const { file, onFinish, onError } = options\n\n  if (!file.file) {\n    onError()\n    return\n  }\n\n  try {\n    await upload({\n      url: '/api/v1/images/import',\n      file: file.file,\n      getToken: () => settingStore.getToken(),\n      onSuccess: () => {\n        onFinish()\n        emit('success')\n        showModal.value = false\n      },\n      onError: () => {\n        onError()\n      },\n    })\n  } catch (error) {\n    console.error('导入镜像失败:', error)\n    onError()\n  }\n}\n\n// 取消操作\nconst handleCancel = () => {\n  if (!uploading.value) {\n    showModal.value = false\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.import-content {\n  .upload-area {\n    text-align: center;\n    padding: 40px 20px;\n\n    .upload-title {\n      display: block;\n      font-size: 16px;\n      margin: 16px 0 8px;\n    }\n\n    .upload-hint {\n      margin: 0;\n      font-size: 14px;\n    }\n  }\n\n  .upload-progress {\n    margin-top: 24px;\n    padding: 20px;\n    background: var(--card-color);\n    border-radius: 8px;\n    border: 1px solid var(--border-color);\n\n    .progress-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n    }\n\n    .progress-details {\n      text-align: center;\n      margin-top: 8px;\n    }\n  }\n}\n</style>\n","<template>\n  <n-modal\n    v-model:show=\"showModal\"\n    :icon=\"getIcon()\"\n    preset=\"dialog\"\n    style=\"padding: 12px; width: 90vw; max-width: 600px\"\n  >\n    <template #header>\n      <span>导入镜像</span>\n    </template>\n    <div class=\"import-content\">\n      <n-upload\n        ref=\"uploadRef\"\n        :max=\"1\"\n        :file-list=\"fileList\"\n        :custom-request=\"handleCustomRequest\"\n        accept=\".tar\"\n        :show-file-list=\"false\"\n        directory-dnd\n        @update:file-list=\"handleFileListUpdate\"\n        @before-upload=\"handleBeforeUpload\"\n      >\n        <n-upload-dragger>\n          <div class=\"upload-area\">\n            <n-icon size=\"48\" :depth=\"3\">\n              <CloudUploadOutline />\n            </n-icon>\n            <n-text class=\"upload-title\"> 点击或者拖动文件到该区域来上传 </n-text>\n            <n-p depth=\"3\" class=\"upload-hint\"> 仅支持 .tar 格式的 Docker 镜像文件 </n-p>\n          </div>\n        </n-upload-dragger>\n      </n-upload>\n\n      <!-- 上传进度 -->\n      <div v-if=\"uploading\" class=\"upload-progress\">\n        <n-space vertical>\n          <div class=\"progress-info\">\n            <n-text>{{ currentFileName }}</n-text>\n            <n-text depth=\"3\"\n              >{{ formatFileSize(uploadedSize) }} / {{ formatFileSize(totalSize) }}</n-text\n            >\n          </div>\n          <n-progress\n            type=\"line\"\n            :percentage=\"uploadProgress\"\n            :show-indicator=\"false\"\n            :height=\"8\"\n          />\n          <div class=\"progress-details\">\n            <n-text depth=\"3\">{{ uploadProgress.toFixed(1) }}% - {{ uploadSpeed }}</n-text>\n          </div>\n        </n-space>\n      </div>\n    </div>\n    <template #action>\n      <n-space justify=\"end\">\n        <n-button @click=\"handleCancel\" :disabled=\"uploading\">\n          {{ uploading ? '上传中...' : '取消' }}\n        </n-button>\n      </n-space>\n    </template>\n  </n-modal>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport {\n  useMessage,\n  useThemeVars,\n  type UploadCustomRequestOptions,\n  type UploadFileInfo,\n} from 'naive-ui'\nimport { CloudUploadOutline } from '@vicons/ionicons5'\nimport { renderIcon } from '@/common/utils'\nimport { useXhrUpload } from '@/hooks/useXhrUpload'\nimport { useSettingStore } from '@/store/setting'\n\nconst theme = useThemeVars()\nconst settingStore = useSettingStore()\n\nconst getIcon = () => {\n  return renderIcon(CloudUploadOutline, {\n    color: theme.value.primaryColor,\n    size: 20,\n  })\n}\n\ninterface Emits {\n  (e: 'success'): void\n}\n\nconst showModal = defineModel<boolean>('show')\nconst emit = defineEmits<Emits>()\nconst message = useMessage()\nconst uploadRef = ref()\nconst fileList = ref<UploadFileInfo[]>([])\n\n// 使用上传hooks\nconst {\n  uploading,\n  uploadProgress,\n  uploadedSize,\n  totalSize,\n  currentFileName,\n  uploadSpeed,\n  resetState,\n  upload,\n  formatFileSize,\n} = useXhrUpload()\n\n// 监听弹窗显示状态\nwatch(showModal, (show) => {\n  if (show) {\n    fileList.value = []\n    resetState()\n  }\n})\n\n// 文件列表更新\nconst handleFileListUpdate = (files: UploadFileInfo[]) => {\n  fileList.value = files\n}\n\n// 上传前验证\nconst handleBeforeUpload = (data: { file: UploadFileInfo }) => {\n  const { file } = data\n\n  // 验证文件类型\n  if (!file.name?.endsWith('.tar')) {\n    message.error('请选择 .tar 格式的镜像文件')\n    return false\n  }\n\n  // 验证文件大小（可选，比如限制最大5GB）\n  const maxSize = 5 * 1024 * 1024 * 1024 // 5GB\n  if (file.file && file.file.size > maxSize) {\n    message.error('文件大小不能超过 5GB')\n    return false\n  }\n\n  return true\n}\n\n// 自定义上传处理\nconst handleCustomRequest = async (options: UploadCustomRequestOptions) => {\n  const { file, onFinish, onError } = options\n\n  if (!file.file) {\n    onError()\n    return\n  }\n\n  try {\n    await upload({\n      url: '/api/v1/images/import',\n      file: file.file,\n      getToken: () => settingStore.getToken(),\n      onSuccess: () => {\n        onFinish()\n        emit('success')\n        showModal.value = false\n      },\n      onError: () => {\n        onError()\n      },\n    })\n  } catch (error) {\n    console.error('导入镜像失败:', error)\n    onError()\n  }\n}\n\n// 取消操作\nconst handleCancel = () => {\n  if (!uploading.value) {\n    showModal.value = false\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.import-content {\n  .upload-area {\n    text-align: center;\n    padding: 40px 20px;\n\n    .upload-title {\n      display: block;\n      font-size: 16px;\n      margin: 16px 0 8px;\n    }\n\n    .upload-hint {\n      margin: 0;\n      font-size: 14px;\n    }\n  }\n\n  .upload-progress {\n    margin-top: 24px;\n    padding: 20px;\n    background: var(--card-color);\n    border-radius: 8px;\n    border: 1px solid var(--border-color);\n\n    .progress-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n    }\n\n    .progress-details {\n      text-align: center;\n      margin-top: 8px;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"images-page\">\n    <!-- 页面头部 -->\n    <n-space>\n      <!-- 过滤器菜单 -->\n      <n-dropdown :options=\"statusFilterMenuOptions\" @select=\"handleFilterSelect\">\n        <n-button circle size=\"small\" :type=\"statusFilter ? 'primary' : 'default'\">\n          <template #icon>\n            <n-icon>\n              <FunnelOutline />\n            </n-icon>\n          </template>\n        </n-button>\n      </n-dropdown>\n      <!-- 排序菜单 -->\n      <n-dropdown :options=\"sortMenuOptions\" @select=\"handleSortSelect\">\n        <n-button circle size=\"small\" :type=\"isSortActive ? 'primary' : 'default'\">\n          <template #icon>\n            <n-icon>\n              <SwapVerticalOutline />\n            </n-icon>\n          </template>\n        </n-button>\n      </n-dropdown>\n      <!-- 搜索 -->\n      <n-input\n        v-model:value=\"searchKeyword\"\n        placeholder=\"搜索镜像标签或ID\"\n        style=\"width: 200px\"\n        clearable\n      >\n        <template #prefix>\n          <n-icon>\n            <SearchOutline />\n          </n-icon>\n        </template>\n      </n-input>\n    </n-space>\n\n    <!-- 镜像列表 -->\n    <div class=\"images-content\">\n      <n-spin :show=\"imageStore.loading && filteredImages.length === 0\">\n        <div v-if=\"filteredImages.length === 0 && !imageStore.loading\" class=\"empty-state\">\n          <n-empty description=\"没有找到镜像\">\n            <template #extra>\n              <n-button @click=\"handleRefresh\">刷新数据</n-button>\n            </template>\n          </n-empty>\n        </div>\n\n        <div\n          v-else\n          class=\"images-grid\"\n          :class=\"{\n            'grid-cols-1': isMobile,\n            'grid-cols-2': isTablet,\n            'grid-cols-3': isLaptop || isDesktop,\n            'grid-cols-4': isDesktopLarge,\n          }\"\n        >\n          <ImageCard\n            v-for=\"image in filteredImages\"\n            :key=\"image.id\"\n            :image=\"image\"\n            @delete=\"handleDelete\"\n          />\n        </div>\n      </n-spin>\n    </div>\n\n    <Teleport to=\"#header\" defer>\n      <div class=\"welcome-card\">\n        <div>\n          <n-h2 class=\"m-0 text-lg\">镜像管理</n-h2>\n          <n-text depth=\"3\" class=\"text-xs max-md:hidden\">\n            共 {{ imageStore.stats.total }} 个镜像， 总大小\n            {{ imageStore.stats.formattedTotalSize }}，\n          </n-text>\n        </div>\n        <n-space size=\"small\">\n          <n-button @click=\"handleRefresh\" :loading=\"imageStore.loading\" circle size=\"tiny\">\n            <template #icon>\n              <RefreshOutline />\n            </template>\n          </n-button>\n          <n-tooltip trigger=\"hover\" :delay=\"500\">\n            <template #trigger>\n              <n-button @click=\"showImportModal = true\" circle size=\"tiny\">\n                <template #icon>\n                  <CloudUploadOutline />\n                </template>\n              </n-button>\n            </template>\n            镜像导入\n          </n-tooltip>\n        </n-space>\n      </div>\n    </Teleport>\n\n    <!-- 镜像导入弹窗 -->\n    <ImageImportModal v-model:show=\"showImportModal\" @success=\"handleImportSuccess\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { ImageInfo } from '@/common/types'\nimport { renderIcon } from '@/common/utils'\nimport ImageCard from '@/components/ImageCard.vue'\nimport ImageImportModal from '@/components/ImageImportModal.vue'\nimport { useImage } from '@/hooks/useImage'\nimport { useResponsive } from '@/hooks/useResponsive'\nimport { useContainerStore } from '@/store/container'\nimport { useImageStore } from '@/store/image'\nimport {\n  AppsOutline,\n  CalendarOutline,\n  CheckmarkCircleOutline,\n  CloseCircleOutline,\n  CloudUploadOutline,\n  FunnelOutline,\n  RefreshOutline,\n  ResizeOutline,\n  SearchOutline,\n  SwapVerticalOutline,\n  TextOutline,\n} from '@vicons/ionicons5'\nimport { computed, onMounted, ref } from 'vue'\nimport { useMessage } from 'naive-ui'\nimport { useAppStore } from '@/store/app'\n\nconst imageStore = useImageStore()\nconst containerStore = useContainerStore()\nconst imageHooks = useImage()\nconst { isMobile, isTablet, isLaptop, isDesktop, isDesktopLarge } = useResponsive()\nconst message = useMessage()\nconst appStore = useAppStore()\n// 弹窗状态\nconst showImportModal = ref(false)\n\n// 搜索关键词\nconst searchKeyword = ref('')\nconst statusFilter = ref<string | null>(null)\nconst sortBy = ref<string>('created') // 默认按创建时间排序\nconst sortOrder = ref<'asc' | 'desc'>('desc') // 默认降序\n\n// 状态过滤菜单选项\nconst statusFilterMenuOptions = computed(() => [\n  {\n    label: '全部',\n    key: null,\n    icon: renderIcon(AppsOutline),\n  },\n  {\n    label: '使用中',\n    key: 'in-use',\n    icon: renderIcon(CheckmarkCircleOutline),\n  },\n  {\n    label: '未使用',\n    key: 'unused',\n    icon: renderIcon(CloseCircleOutline),\n  },\n])\n\n// 判断排序按钮是否应该显示为主色（激活状态）\nconst isSortActive = computed(() => {\n  // 如果不是默认排序设置（创建时间降序），则显示为激活状态\n  return sortBy.value !== 'created' || sortOrder.value !== 'desc'\n})\n\n// 排序菜单选项\nconst sortMenuOptions = computed(() => [\n  {\n    label: `名称 ${sortBy.value === 'name' ? (sortOrder.value === 'asc' ? '↑' : '↓') : ''}`,\n    key: 'name',\n    icon: renderIcon(TextOutline),\n  },\n  {\n    label: `大小 ${sortBy.value === 'size' ? (sortOrder.value === 'asc' ? '↑' : '↓') : ''}`,\n    key: 'size',\n    icon: renderIcon(ResizeOutline),\n  },\n  {\n    label: `创建时间 ${sortBy.value === 'created' ? (sortOrder.value === 'asc' ? '↑' : '↓') : ''}`,\n    key: 'created',\n    icon: renderIcon(CalendarOutline),\n  },\n])\n\n// 处理过滤器菜单选择\nconst handleFilterSelect = (key: string | null) => {\n  statusFilter.value = key\n}\n\n// 处理排序菜单选择\nconst handleSortSelect = (key: string) => {\n  if (sortBy.value === key) {\n    // 如果选择的是相同字段，切换升序/降序\n    sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n  } else {\n    // 如果选择的是不同字段，设置新字段并默认为升序\n    sortBy.value = key\n    sortOrder.value = 'asc'\n  }\n}\n\n// 过滤和排序后的镜像列表\nconst filteredImages = computed(() => {\n  let images = [...imageStore.normalImages]\n\n  // 搜索过滤\n  if (searchKeyword.value) {\n    const keyword = searchKeyword.value.toLowerCase()\n    images = images.filter((image) => {\n      const displayTag = imageStore.getImageDisplayTag(image).toLowerCase()\n      const id = image.id.toLowerCase()\n      const tags = image.repoTags?.join(' ').toLowerCase() || ''\n\n      return displayTag.includes(keyword) || id.includes(keyword) || tags.includes(keyword)\n    })\n  }\n\n  // 状态过滤\n  if (statusFilter.value) {\n    images = images.filter((image) => {\n      const isUse = imageHooks.isImageInUse(image)\n      // console.debug('isUse', image.repoTags, isUse)\n      switch (statusFilter.value) {\n        case 'in-use':\n          return isUse\n        case 'unused':\n          return !isUse\n        default:\n          return false\n      }\n    })\n  }\n\n  // 排序\n  const sortedImages = images.sort((a, b) => {\n    let result = 0\n    switch (sortBy.value) {\n      case 'name':\n        const nameA = imageStore.getImageDisplayTag(a).toLowerCase()\n        const nameB = imageStore.getImageDisplayTag(b).toLowerCase()\n        result = nameA.localeCompare(nameB)\n        break\n      case 'size':\n        result = a.size - b.size\n        break\n      case 'created':\n        result = a.created - b.created\n        break\n      default:\n        return 0\n    }\n    // 根据排序方向调整结果\n    return sortOrder.value === 'asc' ? result : -result\n  })\n  return sortedImages\n})\n\n// 操作处理函数\nconst handleDelete = async (image: ImageInfo) => {\n  await imageHooks.handleDelete(image)\n}\n\n// const handleDeleteDangling = async () => {\n//   await imageHooks.handleDeleteDangling()\n// }\n\nconst handleRefresh = async () => {\n  if (appStore.systemHealth === 'unhealthy') {\n    await appStore.checkHealth()\n  }\n  await imageHooks.handleRefresh()\n  // 同时刷新容器数据以确保使用状态是最新的\n  await containerStore.fetchContainers(true, true)\n}\n\n// 处理导入成功\nconst handleImportSuccess = async () => {\n  // 刷新镜像列表\n  await imageStore.fetchImages()\n  // 刷新容器数据以确保使用状态是最新的\n  await containerStore.fetchContainers(true, false)\n  message.success('镜像导入成功')\n}\n\n// 页面初始化\nonMounted(async () => {\n  if (imageStore.images.length === 0) {\n    await imageStore.fetchImages()\n  }\n  // 加载容器数据以便检查镜像使用情况\n  if (containerStore.containers.length === 0) {\n    await containerStore.fetchContainers()\n  }\n})\n</script>\n\n<style scoped lang=\"less\">\n.welcome-card {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n  height: 100%;\n}\n\n.images-page {\n  .images-content {\n    margin-block: 16px;\n    position: relative;\n  }\n\n  .empty-state {\n    padding: 60px 0;\n    text-align: center;\n  }\n\n  .images-grid {\n    display: grid;\n    gap: 16px;\n\n    &.grid-cols-1 {\n      grid-template-columns: 1fr;\n    }\n\n    &.grid-cols-2 {\n      grid-template-columns: repeat(2, minmax(1fr, 50%));\n    }\n\n    &.grid-cols-3 {\n      grid-template-columns: repeat(3, minmax(1fr, 33.33%));\n    }\n\n    &.grid-cols-4 {\n      grid-template-columns: repeat(4, minmax(1fr, 25%));\n    }\n  }\n}\n\n// 响应式调整\n@media (max-width: 768px) {\n  .images-page {\n    .images-grid {\n      gap: 8px;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"images-page\">\n    <!-- 页面头部 -->\n    <n-space>\n      <!-- 过滤器菜单 -->\n      <n-dropdown :options=\"statusFilterMenuOptions\" @select=\"handleFilterSelect\">\n        <n-button circle size=\"small\" :type=\"statusFilter ? 'primary' : 'default'\">\n          <template #icon>\n            <n-icon>\n              <FunnelOutline />\n            </n-icon>\n          </template>\n        </n-button>\n      </n-dropdown>\n      <!-- 排序菜单 -->\n      <n-dropdown :options=\"sortMenuOptions\" @select=\"handleSortSelect\">\n        <n-button circle size=\"small\" :type=\"isSortActive ? 'primary' : 'default'\">\n          <template #icon>\n            <n-icon>\n              <SwapVerticalOutline />\n            </n-icon>\n          </template>\n        </n-button>\n      </n-dropdown>\n      <!-- 搜索 -->\n      <n-input\n        v-model:value=\"searchKeyword\"\n        placeholder=\"搜索镜像标签或ID\"\n        style=\"width: 200px\"\n        clearable\n      >\n        <template #prefix>\n          <n-icon>\n            <SearchOutline />\n          </n-icon>\n        </template>\n      </n-input>\n    </n-space>\n\n    <!-- 镜像列表 -->\n    <div class=\"images-content\">\n      <n-spin :show=\"imageStore.loading && filteredImages.length === 0\">\n        <div v-if=\"filteredImages.length === 0 && !imageStore.loading\" class=\"empty-state\">\n          <n-empty description=\"没有找到镜像\">\n            <template #extra>\n              <n-button @click=\"handleRefresh\">刷新数据</n-button>\n            </template>\n          </n-empty>\n        </div>\n\n        <div\n          v-else\n          class=\"images-grid\"\n          :class=\"{\n            'grid-cols-1': isMobile,\n            'grid-cols-2': isTablet,\n            'grid-cols-3': isLaptop || isDesktop,\n            'grid-cols-4': isDesktopLarge,\n          }\"\n        >\n          <ImageCard\n            v-for=\"image in filteredImages\"\n            :key=\"image.id\"\n            :image=\"image\"\n            @delete=\"handleDelete\"\n          />\n        </div>\n      </n-spin>\n    </div>\n\n    <Teleport to=\"#header\" defer>\n      <div class=\"welcome-card\">\n        <div>\n          <n-h2 class=\"m-0 text-lg\">镜像管理</n-h2>\n          <n-text depth=\"3\" class=\"text-xs max-md:hidden\">\n            共 {{ imageStore.stats.total }} 个镜像， 总大小\n            {{ imageStore.stats.formattedTotalSize }}，\n          </n-text>\n        </div>\n        <n-space size=\"small\">\n          <n-button @click=\"handleRefresh\" :loading=\"imageStore.loading\" circle size=\"tiny\">\n            <template #icon>\n              <RefreshOutline />\n            </template>\n          </n-button>\n          <n-tooltip trigger=\"hover\" :delay=\"500\">\n            <template #trigger>\n              <n-button @click=\"showImportModal = true\" circle size=\"tiny\">\n                <template #icon>\n                  <CloudUploadOutline />\n                </template>\n              </n-button>\n            </template>\n            镜像导入\n          </n-tooltip>\n        </n-space>\n      </div>\n    </Teleport>\n\n    <!-- 镜像导入弹窗 -->\n    <ImageImportModal v-model:show=\"showImportModal\" @success=\"handleImportSuccess\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { ImageInfo } from '@/common/types'\nimport { renderIcon } from '@/common/utils'\nimport ImageCard from '@/components/ImageCard.vue'\nimport ImageImportModal from '@/components/ImageImportModal.vue'\nimport { useImage } from '@/hooks/useImage'\nimport { useResponsive } from '@/hooks/useResponsive'\nimport { useContainerStore } from '@/store/container'\nimport { useImageStore } from '@/store/image'\nimport {\n  AppsOutline,\n  CalendarOutline,\n  CheckmarkCircleOutline,\n  CloseCircleOutline,\n  CloudUploadOutline,\n  FunnelOutline,\n  RefreshOutline,\n  ResizeOutline,\n  SearchOutline,\n  SwapVerticalOutline,\n  TextOutline,\n} from '@vicons/ionicons5'\nimport { computed, onMounted, ref } from 'vue'\nimport { useMessage } from 'naive-ui'\nimport { useAppStore } from '@/store/app'\n\nconst imageStore = useImageStore()\nconst containerStore = useContainerStore()\nconst imageHooks = useImage()\nconst { isMobile, isTablet, isLaptop, isDesktop, isDesktopLarge } = useResponsive()\nconst message = useMessage()\nconst appStore = useAppStore()\n// 弹窗状态\nconst showImportModal = ref(false)\n\n// 搜索关键词\nconst searchKeyword = ref('')\nconst statusFilter = ref<string | null>(null)\nconst sortBy = ref<string>('created') // 默认按创建时间排序\nconst sortOrder = ref<'asc' | 'desc'>('desc') // 默认降序\n\n// 状态过滤菜单选项\nconst statusFilterMenuOptions = computed(() => [\n  {\n    label: '全部',\n    key: null,\n    icon: renderIcon(AppsOutline),\n  },\n  {\n    label: '使用中',\n    key: 'in-use',\n    icon: renderIcon(CheckmarkCircleOutline),\n  },\n  {\n    label: '未使用',\n    key: 'unused',\n    icon: renderIcon(CloseCircleOutline),\n  },\n])\n\n// 判断排序按钮是否应该显示为主色（激活状态）\nconst isSortActive = computed(() => {\n  // 如果不是默认排序设置（创建时间降序），则显示为激活状态\n  return sortBy.value !== 'created' || sortOrder.value !== 'desc'\n})\n\n// 排序菜单选项\nconst sortMenuOptions = computed(() => [\n  {\n    label: `名称 ${sortBy.value === 'name' ? (sortOrder.value === 'asc' ? '↑' : '↓') : ''}`,\n    key: 'name',\n    icon: renderIcon(TextOutline),\n  },\n  {\n    label: `大小 ${sortBy.value === 'size' ? (sortOrder.value === 'asc' ? '↑' : '↓') : ''}`,\n    key: 'size',\n    icon: renderIcon(ResizeOutline),\n  },\n  {\n    label: `创建时间 ${sortBy.value === 'created' ? (sortOrder.value === 'asc' ? '↑' : '↓') : ''}`,\n    key: 'created',\n    icon: renderIcon(CalendarOutline),\n  },\n])\n\n// 处理过滤器菜单选择\nconst handleFilterSelect = (key: string | null) => {\n  statusFilter.value = key\n}\n\n// 处理排序菜单选择\nconst handleSortSelect = (key: string) => {\n  if (sortBy.value === key) {\n    // 如果选择的是相同字段，切换升序/降序\n    sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n  } else {\n    // 如果选择的是不同字段，设置新字段并默认为升序\n    sortBy.value = key\n    sortOrder.value = 'asc'\n  }\n}\n\n// 过滤和排序后的镜像列表\nconst filteredImages = computed(() => {\n  let images = [...imageStore.normalImages]\n\n  // 搜索过滤\n  if (searchKeyword.value) {\n    const keyword = searchKeyword.value.toLowerCase()\n    images = images.filter((image) => {\n      const displayTag = imageStore.getImageDisplayTag(image).toLowerCase()\n      const id = image.id.toLowerCase()\n      const tags = image.repoTags?.join(' ').toLowerCase() || ''\n\n      return displayTag.includes(keyword) || id.includes(keyword) || tags.includes(keyword)\n    })\n  }\n\n  // 状态过滤\n  if (statusFilter.value) {\n    images = images.filter((image) => {\n      const isUse = imageHooks.isImageInUse(image)\n      // console.debug('isUse', image.repoTags, isUse)\n      switch (statusFilter.value) {\n        case 'in-use':\n          return isUse\n        case 'unused':\n          return !isUse\n        default:\n          return false\n      }\n    })\n  }\n\n  // 排序\n  const sortedImages = images.sort((a, b) => {\n    let result = 0\n    switch (sortBy.value) {\n      case 'name':\n        const nameA = imageStore.getImageDisplayTag(a).toLowerCase()\n        const nameB = imageStore.getImageDisplayTag(b).toLowerCase()\n        result = nameA.localeCompare(nameB)\n        break\n      case 'size':\n        result = a.size - b.size\n        break\n      case 'created':\n        result = a.created - b.created\n        break\n      default:\n        return 0\n    }\n    // 根据排序方向调整结果\n    return sortOrder.value === 'asc' ? result : -result\n  })\n  return sortedImages\n})\n\n// 操作处理函数\nconst handleDelete = async (image: ImageInfo) => {\n  await imageHooks.handleDelete(image)\n}\n\n// const handleDeleteDangling = async () => {\n//   await imageHooks.handleDeleteDangling()\n// }\n\nconst handleRefresh = async () => {\n  if (appStore.systemHealth === 'unhealthy') {\n    await appStore.checkHealth()\n  }\n  await imageHooks.handleRefresh()\n  // 同时刷新容器数据以确保使用状态是最新的\n  await containerStore.fetchContainers(true, true)\n}\n\n// 处理导入成功\nconst handleImportSuccess = async () => {\n  // 刷新镜像列表\n  await imageStore.fetchImages()\n  // 刷新容器数据以确保使用状态是最新的\n  await containerStore.fetchContainers(true, false)\n  message.success('镜像导入成功')\n}\n\n// 页面初始化\nonMounted(async () => {\n  if (imageStore.images.length === 0) {\n    await imageStore.fetchImages()\n  }\n  // 加载容器数据以便检查镜像使用情况\n  if (containerStore.containers.length === 0) {\n    await containerStore.fetchContainers()\n  }\n})\n</script>\n\n<style scoped lang=\"less\">\n.welcome-card {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n  height: 100%;\n}\n\n.images-page {\n  .images-content {\n    margin-block: 16px;\n    position: relative;\n  }\n\n  .empty-state {\n    padding: 60px 0;\n    text-align: center;\n  }\n\n  .images-grid {\n    display: grid;\n    gap: 16px;\n\n    &.grid-cols-1 {\n      grid-template-columns: 1fr;\n    }\n\n    &.grid-cols-2 {\n      grid-template-columns: repeat(2, minmax(1fr, 50%));\n    }\n\n    &.grid-cols-3 {\n      grid-template-columns: repeat(3, minmax(1fr, 33.33%));\n    }\n\n    &.grid-cols-4 {\n      grid-template-columns: repeat(4, minmax(1fr, 25%));\n    }\n  }\n}\n\n// 响应式调整\n@media (max-width: 768px) {\n  .images-page {\n    .images-grid {\n      gap: 8px;\n    }\n  }\n}\n</style>\n"],"mappings":"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"}